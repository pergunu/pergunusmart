<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pilihan Ujian - PERGUNU</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="gradient-bg">
    <div id="particles-js"></div>
    <div class="container exam-selection-container">
        <div class="exam-selection-box animate__animated animate__fadeIn">
            <div class="exam-selection-header">
                <img src="../assets/images/logo.png" alt="PERGUNU Logo" class="logo">
                <h2>Pilih Jenis Ujian</h2>
                <p>Silakan pilih kategori dan jenis ujian yang ingin Anda ikuti</p>
            </div>
            
            <div class="exam-options">
                <!-- Student Options -->
                <div id="studentExamOptions">
                    <h3>Ujian Pelajar</h3>
                    <div class="grade-level" id="sdOptions" style="display: none;">
                        <h4>Kelas:</h4>
                        <div class="grade-buttons">
                            <button class="btn-grade roman">IV</button>
                            <button class="btn-grade roman">V</button>
                            <button class="btn-grade roman">VI</button>
                        </div>
                    </div>
                    <div class="grade-level" id="smpOptions" style="display: none;">
                        <h4>Kelas:</h4>
                        <div class="grade-buttons">
                            <button class="btn-grade roman">VII</button>
                            <button class="btn-grade roman">VIII</button>
                            <button class="btn-grade roman">IX</button>
                        </div>
                    </div>
                    <div class="grade-level" id="smaOptions" style="display: none;">
                        <h4>Kelas:</h4>
                        <div class="grade-buttons">
                            <button class="btn-grade roman">X</button>
                            <button class="btn-grade roman">XI</button>
                            <button class="btn-grade roman">XII</button>
                        </div>
                    </div>
                    
                    <h4>Mata Pelajaran:</h4>
                    <div class="subject-buttons">
                        <button class="btn-subject" data-subject="AGAMA">AGAMA</button>
                        <button class="btn-subject" data-subject="PPKN">PPKN</button>
                        <button class="btn-subject" data-subject="SEJARAH">SEJARAH</button>
                        <button class="btn-subject" data-subject="IPA">IPA</button>
                        <button class="btn-subject" data-subject="IPS">IPS</button>
                        <button class="btn-subject" data-subject="MATEMATIKA">MATEMATIKA</button>
                        <button class="btn-subject" data-subject="BAHASA INDONESIA">BAHASA INDONESIA</button>
                        <button class="btn-subject" data-subject="BAHASA INGGRIS">BAHASA INGGRIS</button>
                        <button class="btn-subject" data-subject="MATERI EXTRA">MATERI EXTRA</button>
                        <button class="btn-subject" data-subject="MATERI KHUSUS">MATERI KHUSUS</button>
                    </div>
                </div>
                
                <!-- General Public Options -->
                <div id="generalExamOptions" style="display: none;">
                    <h3>Ujian Umum</h3>
                    <div class="exam-type-buttons">
                        <button class="btn-exam-type" data-exam="Ujian Logika">Ujian Logika</button>
                        <button class="btn-exam-type" data-exam="Ujian CPNS/P3K">Ujian CPNS/P3K</button>
                    </div>
                    
                    <div id="cpnsLicenseForm" style="display: none;">
                        <div class="form-group">
                            <label for="licenseCode">Masukkan Kode Lisensi Ujian CPNS/P3K</label>
                            <input type="password" id="licenseCode" placeholder="Masukkan kode lisensi">
                            <button id="verifyLicense" class="btn btn-small">Verifikasi</button>
                            <small id="licenseStatus"></small>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="info-panel">
                <h4>Informasi Berkala</h4>
                <div class="info-content">
                    <p>Ujian online ini diselenggarakan oleh PERGUNU SITUBONDO sebagai bentuk pengembangan pendidikan berbasis teknologi.</p>
                    <p>Hasil ujian akan dikirim via email dan WhatsApp dalam bentuk sertifikat digital.</p>
                </div>
            </div>
            
            <div class="start-exam-button">
                <button id="startExamBtn" class="btn btn-primary" disabled>Mulai Ujian Sekarang</button>
            </div>
        </div>
    </div>

    <script src="../assets/js/main.js"></script>
    <script>
        // Load participant data
        const participantData = JSON.parse(localStorage.getItem('participantData'));
        
        // Show appropriate options based on participant status
        if (participantData.status === 'pelajar') {
            document.getElementById('studentExamOptions').style.display = 'block';
            document.getElementById('generalExamOptions').style.display = 'none';
            
            // Show appropriate grade level based on school level
            if (participantData.schoolLevel === 'SD') {
                document.getElementById('sdOptions').style.display = 'block';
            } else if (participantData.schoolLevel === 'SMP') {
                document.getElementById('smpOptions').style.display = 'block';
            } else if (participantData.schoolLevel === 'SMA/SMK') {
                document.getElementById('smaOptions').style.display = 'block';
            }
        } else {
            document.getElementById('studentExamOptions').style.display = 'none';
            document.getElementById('generalExamOptions').style.display = 'block';
            
            // Show CPNS license form if CPNS exam is selected
            document.querySelectorAll('.btn-exam-type').forEach(btn => {
                btn.addEventListener('click', function() {
                    if (this.dataset.exam === 'Ujian CPNS/P3K') {
                        document.getElementById('cpnsLicenseForm').style.display = 'block';
                    } else {
                        document.getElementById('cpnsLicenseForm').style.display = 'none';
                    }
                });
            });
            
            // Verify CPNS license code
            document.getElementById('verifyLicense').addEventListener('click', function() {
                const licenseCode = document.getElementById('licenseCode').value;
                // Default CPNS license code: OPENLOCK-1945
                if (licenseCode === 'OPENLOCK-1945') {
                    document.getElementById('licenseStatus').textContent = 'Kode lisensi valid';
                    document.getElementById('licenseStatus').style.color = 'green';
                    document.getElementById('startExamBtn').disabled = false;
                } else {
                    document.getElementById('licenseStatus').textContent = 'Kode lisensi tidak valid';
                    document.getElementById('licenseStatus').style.color = 'red';
                    document.getElementById('startExamBtn').disabled = true;
                }
            });
        }
        
        // Enable start exam button when subject is selected
        document.querySelectorAll('.btn-subject').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.btn-subject').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                document.getElementById('startExamBtn').disabled = false;
            });
        });
        
        // Start exam button handler
        document.getElementById('startExamBtn').addEventListener('click', function() {
            window.location.href = 'exam.html';
        });
    </script>
</body>
</html>
