<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pilihan Ujian - PERGUNU Situbondo</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="gradient-bg">
    <div id="particles-js"></div>
    <div class="container">
        <div class="exam-selection-box">
            <h1>Pilih Jenis Ujian</h1>
            <p>Silakan pilih kategori dan jenis ujian yang ingin Anda ikuti.</p>
            
            <div id="student-exams" class="exam-category">
                <h2>Ujian untuk Pelajar</h2>
                <div class="exam-grid">
                    <button class="exam-btn" data-subject="agama">AGAMA</button>
                    <button class="exam-btn" data-subject="ppkn">PPKN</button>
                    <button class="exam-btn" data-subject="sejarah">SEJARAH</button>
                    <button class="exam-btn" data-subject="ipa">IPA</button>
                    <button class="exam-btn" data-subject="ips">IPS</button>
                    <button class="exam-btn" data-subject="matematika">MATEMATIKA</button>
                    <button class="exam-btn" data-subject="bahasa-indonesia">BAHASA INDONESIA</button>
                    <button class="exam-btn" data-subject="bahasa-inggris">BAHASA INGGRIS</button>
                    <button class="exam-btn" data-subject="materi-extra">MATERI EXTRA</button>
                    <button class="exam-btn" data-subject="materi-khusus">MATERI KHUSUS</button>
                </div>
                
                <div class="grade-selection">
                    <h3>Tingkat Kelas:</h3>
                    <div class="grade-buttons">
                        <button class="grade-btn roman" data-grade="IV">Kelas IV</button>
                        <button class="grade-btn roman" data-grade="V">Kelas V</button>
                        <button class="grade-btn roman" data-grade="VI">Kelas VI</button>
                        <button class="grade-btn roman" data-grade="VII">Kelas VII</button>
                        <button class="grade-btn roman" data-grade="VIII">Kelas VIII</button>
                        <button class="grade-btn roman" data-grade="IX">Kelas IX</button>
                        <button class="grade-btn roman" data-grade="X">Kelas X</button>
                        <button class="grade-btn roman" data-grade="XI">Kelas XI</button>
                        <button class="grade-btn roman" data-grade="XII">Kelas XII</button>
                    </div>
                </div>
            </div>
            
            <div id="general-exams" class="exam-category">
                <h2>Ujian untuk Umum</h2>
                <div class="exam-grid">
                    <button class="exam-btn" data-subject="ujian-logika">Ujian Logika</button>
                    <button class="exam-btn" data-subject="ujian-cpns">Ujian CPNS/P3K</button>
                </div>
                
                <div id="cpns-license" style="display: none;">
                    <div class="form-group">
                        <label for="license-code">Masukkan Kode Lisensi Ujian CPNS/P3K:</label>
                        <input type="password" id="license-code" class="form-input">
                        <button id="verify-license" class="btn-secondary">Verifikasi Kode</button>
                    </div>
                </div>
            </div>
            
            <div class="start-exam-container">
                <button id="start-exam-btn" class="btn-primary" disabled>Mulai Ujian Sekarang</button>
            </div>
            
            <div class="info-box">
                <h3>Informasi Ujian</h3>
                <ul>
                    <li>Waktu ujian: 120 menit</li>
                    <li>Jumlah soal: 50 (untuk semua kategori)</li>
                    <li>Sistem penilaian: +4 untuk jawaban benar, 0 untuk jawaban salah/tidak diisi</li>
                    <li>Hasil ujian dapat dilihat langsung setelah menyelesaikan ujian</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="assets/js/particles.js"></script>
    <script src="assets/js/main.js"></script>
    <script>
        // Get participant data
        const participant = JSON.parse(localStorage.getItem('participantData'));
        let selectedSubject = null;
        let selectedGrade = null;
        
        // Show/hide exam categories based on participant status
        if (participant.status === 'pelajar') {
            document.getElementById('general-exams').style.display = 'none';
            
            // Set grade buttons based on school level
            const gradeButtons = document.querySelectorAll('.grade-btn');
            gradeButtons.forEach(btn => {
                const grade = btn.dataset.grade;
                
                if (participant.level === 'SD' && !['IV', 'V', 'VI'].includes(grade)) {
                    btn.style.display = 'none';
                } else if (participant.level === 'SMP' && !['VII', 'VIII', 'IX'].includes(grade)) {
                    btn.style.display = 'none';
                } else if (participant.level === 'SMA/SMK' && !['X', 'XI', 'XII'].includes(grade)) {
                    btn.style.display = 'none';
                }
            });
        } else {
            document.getElementById('student-exams').style.display = 'none';
            
            // Show CPNS license field if CPNS exam is selected
            document.querySelector('[data-subject="ujian-cpns"]').addEventListener('click', function() {
                document.getElementById('cpns-license').style.display = 'block';
            });
            
            // Verify CPNS license code
            document.getElementById('verify-license').addEventListener('click', function() {
                const code = document.getElementById('license-code').value.trim();
                if (code === 'OPENLOCK-1926') {
                    alert('Kode lisensi valid! Silakan pilih ujian lainnya atau mulai ujian.');
                    selectedSubject = 'ujian-cpns';
                    document.getElementById('start-exam-btn').disabled = false;
                } else {
                    alert('Kode lisensi salah!');
                    document.getElementById('license-code').focus();
                }
            });
        }
        
        // Subject selection
        document.querySelectorAll('.exam-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.exam-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                selectedSubject = this.dataset.subject;
                
                if (participant.status === 'pelajar') {
                    document.getElementById('start-exam-btn').disabled = selectedGrade === null;
                } else if (selectedSubject !== 'ujian-cpns') {
                    document.getElementById('start-exam-btn').disabled = false;
                }
            });
        });
        
        // Grade selection
        document.querySelectorAll('.grade-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.grade-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                selectedGrade = this.dataset.grade;
                document.getElementById('start-exam-btn').disabled = selectedSubject === null;
            });
        });
        
        // Start exam
        document.getElementById('start-exam-btn').addEventListener('click', function() {
            // Save exam selection
            const examData = {
                subject: selectedSubject,
                grade: selectedGrade,
                timestamp: new Date().toISOString()
            };
            localStorage.setItem('examData', JSON.stringify(examData));
            
            // Play button sound
            const audio = new Audio('assets/audio/audiotombol.mp3');
            audio.play();
            
            // Redirect to exam page
            setTimeout(() => {
                window.location.href = 'exam.html';
            }, 500);
        });
    </script>
</body>
</html>
