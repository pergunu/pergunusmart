<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ujian Online PERGUNUSMART</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --color-primary: #FF6B35;
            --color-secondary: #FFA630;
            --color-tertiary: #EF8A17;
            --color-primary-dark: #D45B00;
            --color-primary-light: #FF9E4F;
            --color-success: #4CAF50;
            --color-error: #f44336;
            --color-warning: #ff9800;
            --color-info: #2196F3;
            --color-dark: #1a1a2e;
            --color-light: #f8f9fa;
            --color-card-bg: rgba(255, 255, 255, 0.08);
            --color-card-border: rgba(255, 255, 255, 0.15);
            --color-text-light: #FFFFFF;
            --color-text-dark: #333333;
            --border-radius: 12px;
            --box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--color-primary-dark), var(--color-primary), var(--color-secondary));
            color: var(--color-text-light);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            line-height: 1.6;
        }

        /* Particle Background */
        #particles-js {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
            opacity: 0.6;
        }

        #celebration-particles {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 1000;
            pointer-events: none;
            display: none;
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        /* Header Styles */
        .header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 20px;
        }

        .logo {
            height: 80px;
            margin-bottom: 15px;
            filter: drop-shadow(0 2px 5px rgba(0, 0, 0, 0.3));
        }

        h1, h2, h3, h4, h5, h6 {
            margin-bottom: 1rem;
            font-weight: 600;
            line-height: 1.3;
        }

        h1 { font-size: 2.2rem; }
        h2 { font-size: 1.8rem; }
        h3 { font-size: 1.5rem; }
        h4 { font-size: 1.3rem; }
        h5 { font-size: 1.1rem; }
        h6 { font-size: 1rem; }

        p {
            margin-bottom: 1rem;
        }

        /* Card Styles */
        .card {
            background: var(--color-card-bg);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--box-shadow);
            margin-bottom: 30px;
            transition: var(--transition);
            border: 1px solid var(--color-card-border);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.3);
        }

        /* Button Styles */
        .btn {
            display: inline-block;
            padding: 12px 25px;
            border-radius: 50px;
            background: linear-gradient(to right, var(--color-secondary), var(--color-tertiary));
            color: white;
            text-decoration: none;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(255, 166, 48, 0.3);
            margin: 8px 5px;
            text-align: center;
            font-size: 1rem;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 166, 48, 0.4);
            background: linear-gradient(to right, var(--color-tertiary), var(--color-secondary));
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn-success {
            background: linear-gradient(to right, var(--color-success), #2ecc71);
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }

        .btn-danger {
            background: linear-gradient(to right, var(--color-error), #e74c3c);
            box-shadow: 0 4px 15px rgba(244, 67, 54, 0.3);
        }

        .btn-warning {
            background: linear-gradient(to right, var(--color-warning), #f39c12);
            box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);
        }

        .btn-info {
            background: linear-gradient(to right, var(--color-info), #3498db);
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border-radius: var(--border-radius);
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.1);
            color: var(--color-text-light);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--color-secondary);
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 0 3px rgba(255, 166, 48, 0.2);
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--color-text-light);
        }

        textarea.form-control {
            min-height: 100px;
            resize: vertical;
        }

        /* Radio and Checkbox Styles */
        .radio-group, .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .radio-option, .checkbox-option {
            display: none;
        }

        .radio-label, .checkbox-label {
            padding: 10px 20px;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }

        .radio-option:checked + .radio-label,
        .checkbox-option:checked + .checkbox-label {
            background: linear-gradient(to right, var(--color-secondary), var(--color-tertiary));
            box-shadow: 0 4px 15px rgba(255, 166, 48, 0.3);
        }

        /* Animation Classes */
        .slide-in {
            animation: slideIn 0.5s forwards;
        }

        .slide-out {
            animation: slideOut 0.5s forwards;
        }

        .fade-in {
            animation: fadeIn 0.5s forwards;
        }

        .fade-out {
            animation: fadeOut 0.5s forwards;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(-100%); opacity: 0; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        /* Timer Styles */
        .timer {
            font-size: 1.8rem;
            font-weight: 700;
            text-align: center;
            margin: 20px 0;
            color: var(--color-text-light);
            transition: var(--transition);
        }

        .timer-warning {
            color: var(--color-warning);
            font-size: 2rem;
        }

        .timer-danger {
            color: var(--color-error);
            font-size: 2.2rem;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Notification Styles */
        .notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px 25px;
            border-radius: var(--border-radius);
            z-index: 1000;
            animation: slideUp 0.5s forwards;
            max-width: 90%;
            text-align: center;
            font-size: 0.9rem;
        }

        @keyframes slideUp {
            from { bottom: -50px; opacity: 0; }
            to { bottom: 20px; opacity: 1; }
        }

        /* Question Styles */
        .question-container {
            margin-bottom: 2rem;
        }

        .question {
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }

        .option {
            padding: 15px;
            border-radius: var(--border-radius);
            background: rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }

        .option:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .option.correct {
            background: var(--color-success);
            animation: correctAnswer 0.5s;
        }

        .option.incorrect {
            background: var(--color-error);
            animation: incorrectAnswer 0.5s;
        }

        @keyframes correctAnswer {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes incorrectAnswer {
            0% { transform: translateX(0); }
            20% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-10px); }
            80% { transform: translateX(10px); }
            100% { transform: translateX(0); }
        }

        .explanation {
            margin-top: 1.5rem;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: var(--border-radius);
            display: none;
        }

        /* Certificate Styles - REVISED FOR PRINTING */
        .certificate {
            background: white;
            color: var(--color-text-dark);
            padding: 0;
            border-radius: 0;
            box-shadow: none;
            width: 210mm; /* A4 width */
            height: 297mm; /* A4 height */
            margin: 20px auto;
            position: relative;
            overflow: hidden;
            background-image: url('https://raw.githubusercontent.com/pergunu/pergunusmart/main/assets/images/certificate.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: flex;
            flex-direction: column;
            justify-content: center;
            page-break-after: avoid;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }

        .certificate-content {
            position: relative;
            z-index: 1;
            text-align: center;
            padding: 40px 60px;
            margin: 0 auto;
            width: 80%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .certificate-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--color-primary-dark);
            text-transform: uppercase;
        }

        .certificate-code {
            font-size: 14px;
            margin-bottom: 30px;
            color: #555;
            letter-spacing: 1px;
        }

        .certificate-recipient {
            font-size: 48px;
            margin: 20px 0;
            font-weight: 600;
            color: var(--color-text-dark);
            font-family: 'Dancing Script', cursive;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        .certificate-body {
            font-size: 16px;
            line-height: 1.6;
            margin: 10px 0;
            color: var(--color-text-dark);
        }

        .certificate-score {
            font-size: 28px;
            font-weight: 700;
            color: var(--color-primary-dark);
            margin: 20px 0;
        }

        .certificate-motivation {
            font-style: italic;
            margin: 15px 0;
            font-size: 14px;
            color: #555;
        }

        .certificate-footer {
            margin-top: 30px;
            font-size: 12px;
            color: #555;
        }

        .certificate-signature {
            margin-top: 40px;
            font-size: 14px;
        }

        .certificate-barcode {
            margin: 15px auto;
            height: 80px;
            width: auto;
        }

        /* Floating Button Styles */
        .floating-buttons {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 100;
        }

        .floating-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(to right, var(--color-secondary), var(--color-tertiary));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: var(--box-shadow);
            cursor: pointer;
            transition: var(--transition);
            border: none;
        }

        .floating-btn:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }

        .floating-btn .tooltip {
            position: absolute;
            right: 60px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 14px;
            opacity: 0;
            pointer-events: none;
            transition: var(--transition);
            white-space: nowrap;
        }

        .floating-btn:hover .tooltip {
            opacity: 1;
            right: 70px;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal-content {
            background: white;
            color: var(--color-text-dark);
            border-radius: var(--border-radius);
            padding: 30px;
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: modalFadeIn 0.3s;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--color-primary-dark);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            transition: var(--transition);
        }

        .modal-close:hover {
            color: var(--color-error);
            transform: rotate(90deg);
        }

        /* Roman numeral styles */
        .roman {
            font-family: 'Times New Roman', serif;
            font-style: italic;
        }

        /* Print Styles - REVISED FOR BETTER PRINTING */
        @media print {
            body * {
                visibility: hidden;
                background: white !important;
                color: black !important;
            }
            
            .certificate, 
            .certificate * {
                visibility: visible;
                background: transparent !important;
                color: #333 !important;
            }
            
            .certificate {
                position: absolute;
                left: 0;
                top: 0;
                width: 210mm !important;
                height: 297mm !important;
                margin: 0 !important;
                padding: 0 !important;
                box-shadow: none !important;
                border-radius: 0 !important;
                background-image: url('https://raw.githubusercontent.com/pergunu/pergunusmart/main/assets/images/certificate.png') !important;
                background-size: cover !important;
                background-position: center !important;
                background-repeat: no-repeat !important;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                page-break-after: avoid !important;
                page-break-inside: avoid !important;
            }
            
            .certificate-content {
                padding: 40px 60px !important;
                margin: 0 auto !important;
                width: 80% !important;
                height: 100% !important;
                display: flex !important;
                flex-direction: column !important;
                justify-content: center !important;
            }
            
            .certificate-recipient {
                font-size: 48px !important;
                font-family: 'Dancing Script', cursive !important;
            }
            
            .floating-buttons, 
            .results-summary, 
            .result-actions {
                display: none !important;
            }
            
            @page {
                size: A4 portrait;
                margin: 0;
            }
        }

        /* Responsive Styles */
        @media (max-width: 992px) {
            .container {
                padding: 20px 15px;
            }
            
            .card {
                padding: 25px;
            }
            
            .certificate-content {
                padding: 30px;
                width: 85%;
            }
            
            .certificate-title {
                font-size: 24px;
            }
            
            .certificate-recipient {
                font-size: 42px;
            }
        }

        @media (max-width: 768px) {
            h1 { font-size: 1.8rem; }
            h2 { font-size: 1.5rem; }
            h3 { font-size: 1.3rem; }
            
            .container {
                padding: 15px;
            }
            
            .card {
                padding: 20px;
            }
            
            .certificate-content {
                padding: 25px;
                width: 90%;
            }
            
            .certificate-title {
                font-size: 22px;
            }
            
            .certificate-recipient {
                font-size: 36px;
            }
            
            .floating-buttons {
                bottom: 20px;
                right: 20px;
            }
            
            .floating-btn {
                width: 45px;
                height: 45px;
                font-size: 18px;
            }

            .modal-content {
                width: 95%;
                padding: 20px;
            }
        }

        @media (max-width: 576px) {
            h1 { font-size: 1.6rem; }
            h2 { font-size: 1.4rem; }
            h3 { font-size: 1.2rem; }
            
            .btn {
                padding: 10px 20px;
                font-size: 0.9rem;
                width: 100%;
                margin: 5px 0;
            }
            
            .form-control {
                padding: 10px 12px;
                font-size: 0.9rem;
            }
            
            .certificate-content {
                padding: 20px;
                width: 95%;
            }
            
            .certificate-title {
                font-size: 20px;
            }
            
            .certificate-recipient {
                font-size: 32px;
            }
            
            .radio-group, .checkbox-group {
                flex-direction: column;
                gap: 8px;
            }
            
            .radio-label, .checkbox-label {
                padding: 8px 15px;
            }
            
            .exam-controls {
                display: flex;
                flex-direction: column;
                gap: 10px;
            }
        }

        /* Admin Panel Specific Styles */
        .admin-section {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .admin-section h5 {
            color: var(--color-primary-dark);
            margin-bottom: 15px;
            font-size: 18px;
        }

        .admin-controls {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .admin-control-group {
            margin-bottom: 15px;
        }

        .admin-control-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            font-size: 14px;
            color: var(--color-text-dark);
        }

        .admin-control-input {
            width: 100%;
            padding: 10px 12px;
            border-radius: 6px;
            border: 1px solid #ddd;
            background: white;
            font-size: 14px;
            color: var(--color-text-dark);
        }

        .admin-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--color-success);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        .participant-list {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 15px;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 10px;
        }

        .participant-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            font-size: 14px;
        }

        .participant-item:last-child {
            border-bottom: none;
        }

        /* Question Bank Styles */
        .questions-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 10px;
        }

        .question-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
            font-size: 14px;
            position: relative;
        }

        .question-item:last-child {
            border-bottom: none;
        }

        .question-actions {
            position: absolute;
            right: 10px;
            top: 10px;
            display: flex;
            gap: 5px;
        }

        .question-action-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            padding: 2px 5px;
            border-radius: 3px;
            transition: var(--transition);
        }

        .question-action-btn:hover {
            transform: scale(1.1);
        }

        .edit-btn {
            color: var(--color-info);
        }

        .delete-btn {
            color: var(--color-error);
        }

        .view-btn {
            color: var(--color-success);
        }

        .options-container {
            display: grid;
            gap: 5px;
            margin: 10px 0;
        }

        /* Loading Indicator */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(0,0,0,.3);
            border-radius: 50%;
            border-top-color: var(--color-primary-dark);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Table Styles */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 14px;
        }

        .data-table th, .data-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .data-table th {
            background-color: #f5f5f5;
            font-weight: 600;
        }

        .data-table tr:hover {
            background-color: #f9f9f9;
        }

        /* Checkbox styles for participant selection */
        .select-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .select-all-checkbox {
            margin-right: 10px;
        }

        /* Bulk action controls */
        .bulk-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .selected-count {
            font-size: 14px;
            color: #666;
        }

        /* Edit Question Modal */
        .edit-question-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .edit-question-content {
            background: white;
            color: var(--color-text-dark);
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .edit-question-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }
        
        /* GPS Button Styles */
        .gps-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 15px;
            background: linear-gradient(to right, #4CAF50, #2ecc71);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 5px;
            font-size: 14px;
            transition: var(--transition);
        }
        
        .gps-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(76, 175, 80, 0.3);
        }
        
        .gps-btn i {
            margin-right: 5px;
        }
        
        .gps-result {
            margin-top: 5px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 14px;
        }

        /* View Question Modal */
        .view-question-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .view-question-content {
            background: white;
            color: var(--color-text-dark);
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .view-question-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        /* Edit Participant Modal */
        .edit-participant-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .edit-participant-content {
            background: white;
            color: var(--color-text-dark);
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .edit-participant-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        /* Search Box Styles */
        .search-box {
            position: relative;
            margin-bottom: 15px;
        }

        .search-box input {
            width: 100%;
            padding: 10px 15px 10px 35px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 14px;
            color: var(--color-text-dark);
        }

        .search-box i {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
        }

        /* Certificate Validation Styles */
        .certificate-validation {
            margin-top: 20px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
        }

        .validation-result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }

        .valid {
            background-color: #d4edda;
            color: #155724;
        }

        .invalid {
            background-color: #f8d7da;
            color: #721c24;
        }

        /* Certificate Info Styles */
        .certificate-info {
            margin-top: 15px;
            padding: 10px;
            background: #e2e3e5;
            border-radius: 5px;
            font-size: 13px;
        }

        /* Terms content scrollable */
        .terms-content {
            max-height: 300px;
            overflow-y: auto;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        /* Results summary grid */
        .results-summary {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .results-summary p {
            margin-bottom: 0.5rem;
        }

        /* Exam controls grid */
        .exam-controls {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }

        /* Result actions grid */
        .result-actions {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }

        /* Small text styles */
        .text-muted {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.85rem;
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <div id="particles-js"></div>
    <div id="celebration-particles"></div>
    
    <div class="container">
        <!-- Welcome Screen -->
        <div id="welcome-screen" class="card slide-in">
            <div class="header">
                <img src="https://raw.githubusercontent.com/pergunu/pergunusmart/main/assets/images/logo.png" alt="PERGUNUSMART Logo" class="logo">
                <h1>Ujian Online PERGUNUSMART</h1>
            </div>
            
            <div id="greeting-message">
                <p id="greeting-text">Selamat datang di sistem ujian online PERGUNUSMART. Silakan masukkan kode login (12345) untuk melanjutkan.</p>
            </div>
            
            <div class="form-group">
                <label for="login-code" class="form-label">Kode Login</label>
                <input type="password" id="login-code" class="form-control" placeholder="Masukkan kode login">
                <small class="text-muted">Kode login diberikan oleh admin</small>
            </div>
            
            <button id="login-btn" class="btn">Masuk</button>
        </div>
        
        <!-- Terms Screen (Hidden Initially) -->
        <div id="terms-screen" class="card" style="display: none;">
            <h2>Peraturan dan Kebijakan Ujian Online</h2>
            <div class="terms-content">
                <p>1. Ujian ini dikembangkan oleh Cendhanu Tim Kreator PERGUNU.</p>
                <p>2. Peserta wajib mengisi data diri dengan benar dan lengkap.</p>
                <p>3. Dilarang keras melakukan kecurangan selama ujian berlangsung.</p>
                <p>4. Waktu ujian akan berjalan terus dan tidak dapat dihentikan.</p>
                <p>5. Jawaban yang sudah dipilih tidak dapat diubah.</p>
                <p>6. Soal yang tidak dijawab akan dianggap salah.</p>
                <p>7. Hasil ujian akan ditampilkan setelah waktu habis atau peserta menyelesaikan ujian.</p>
                <p>8. Sertifikat akan diberikan kepada peserta yang menyelesaikan ujian.</p>
                <p>9. Keputusan panitia ujian bersifat mutlak dan tidak dapat diganggu gugat.</p>
            </div>
            
            <div class="form-group">
                <input type="checkbox" id="agree-terms" class="checkbox-option">
                <label for="agree-terms" class="checkbox-label">Saya menyetujui</label>
            </div>
            
            <button id="continue-btn" class="btn" disabled>Lanjut Ikut Ujian</button>
        </div>
        
        <!-- Participant Form (Hidden Initially) -->
        <div id="participant-form" class="card" style="display: none;">
            <h2>Formulir Data Peserta</h2>
            <p>Silakan isi data diri Anda dengan benar. Data ini akan digunakan untuk sertifikat ujian.</p>
            
            <div class="form-group">
                <label for="fullname" class="form-label">Nama Lengkap</label>
                <input type="text" id="fullname" class="form-control" placeholder="Masukkan nama lengkap" oninput="validateNameInput(this)">
            </div>
            
            <div class="form-group">
                <label for="address" class="form-label">Alamat</label>
                <input type="text" id="address" class="form-control" placeholder="Masukkan alamat lengkap">
                <button id="get-location-btn" class="gps-btn">
                    <i class="fas fa-map-marker-alt"></i> Gunakan GPS
                </button>
                <div id="gps-result" class="gps-result" style="display: none;"></div>
            </div>
            
            <div class="form-group">
                <label for="phone" class="form-label">Nomor WhatsApp Aktif</label>
                <input type="tel" id="phone" class="form-control" placeholder="Masukkan nomor WhatsApp" pattern="[0-9]{10,13}" oninput="validatePhoneInput(this)">
                <small class="text-muted">Contoh: 6281234567890 (10-13 digit)</small>
            </div>
            
            <div class="form-group">
                <label for="email" class="form-label">Email Alamat</label>
                <input type="email" id="email" class="form-control" placeholder="Masukkan alamat email" pattern="[a-z0-9._%+-]+@(gmail|yahoo|hotmail)\.com$">
                <small class="text-muted">Hanya menerima @gmail.com, @yahoo.com, atau @hotmail.com</small>
            </div>
            
            <div class="form-group">
                <label class="form-label">Tujuan Ikut Ujian</label>
                <div class="radio-group">
                    <input type="radio" id="purpose-iq" name="purpose" value="Tes IQ" class="radio-option" checked>
                    <label for="purpose-iq" class="radio-label">Tes IQ</label>
                    
                    <input type="radio" id="purpose-cpns" name="purpose" value="Ujian CPNS/P3K" class="radio-option">
                    <label for="purpose-cpns" class="radio-label">Ujian CPNS/P3K</label>
                </div>
            </div>
            
            <!-- CPNS License Code (Hidden Initially) -->
            <div id="cpns-license-section" style="display: none;">
                <div class="form-group">
                    <label for="cpns-license" class="form-label">Kode Lisensi Ujian CPNS/P3K</label>
                    <input type="password" id="cpns-license" class="form-control" placeholder="Masukkan kode lisensi">
                    <small class="text-muted">Kode lisensi diberikan oleh admin</small>
                </div>
            </div>
            
            <!-- Admin Information -->
            <div class="form-group" id="admin-info" style="margin-top: 30px;">
                <p>Informasi berkala dari admin:</p>
                <div style="padding: 15px; background: rgba(0, 0, 0, 0.1); border-radius: 8px;">
                    <p id="admin-message">Tidak ada informasi terbaru saat ini.</p>
                </div>
            </div>
            
            <button id="save-participant-btn" class="btn" disabled>Mulai Ujian Sekarang</button>
        </div>
        
        <!-- Exam Screen (Hidden Initially) -->
        <div id="exam-screen" class="card" style="display: none;">
            <div class="timer" id="exam-timer">02:00:00</div>
            
            <div class="question-container">
                <div class="question" id="question-text">Memuat soal...</div>
                
                <div class="options" id="options-container">
                    <!-- Options will be populated by JavaScript -->
                </div>
                
                <div class="explanation" id="explanation-text">
                    <!-- Explanation will be populated by JavaScript -->
                </div>
            </div>
            
            <div class="exam-controls">
                <button id="finish-exam-btn" class="btn btn-danger">Selesaikan Ujian Sekarang</button>
                <button id="skip-question-btn" class="btn btn-warning">Lewati Soal</button>
                <button id="unanswered-btn" class="btn btn-info">Soal Belum Dijawab</button>
            </div>
        </div>
        
        <!-- Results Screen (Hidden Initially) -->
        <div id="results-screen" class="card" style="display: none;">
            <h2>Hasil Ujian</h2>
            
            <div class="results-summary">
                <p>Nama: <span id="result-name"></span></p>
                <p>Alamat: <span id="result-address"></span></p>
                <p>WhatsApp: <span id="result-phone"></span></p>
                <p>Email: <span id="result-email"></span></p>
                <p>Tujuan Ujian: <span id="result-purpose"></span></p>
                <p>Jumlah Soal: <span id="total-questions"></span></p>
                <p>Jawaban Benar: <span id="correct-answers"></span></p>
                <p>Jawaban Salah: <span id="wrong-answers"></span></p>
                <p>Tidak Dijawab: <span id="unanswered-questions"></span></p>
                <p>Nilai: <span id="exam-score"></span></p>
            </div>
            
            <div class="certificate-container" id="certificate-container" style="display: none;">
                <!-- Certificate will be generated here -->
            </div>
            
            <div class="result-actions">
                <button id="print-certificate-btn" class="btn btn-success">Cetak Sertifikat</button>
                <button id="retake-exam-btn" class="btn btn-info">Ulangi Ujian</button>
            </div>
        </div>
    </div>
    
    <!-- Floating Buttons -->
    <div class="floating-buttons">
        <button class="floating-btn" id="whatsapp-btn">
            <i class="fab fa-whatsapp"></i>
            <span class="tooltip">Chat Admin</span>
        </button>
        
        <button class="floating-btn" id="question-bank-btn">
            <i class="fas fa-book"></i>
            <span class="tooltip">Bank Soal</span>
        </button>
        
        <button class="floating-btn" id="admin-panel-btn">
            <i class="fas fa-cog"></i>
            <span class="tooltip">Admin Panel</span>
        </button>
    </div>
    
    <!-- Modals -->
    <!-- Question Bank Modal -->
    <div class="modal" id="question-bank-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Bank Soal</h3>
                <button class="modal-close" id="close-question-bank-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="question-bank-code" class="form-label">Kode Bank Soal</label>
                    <input type="password" id="question-bank-code" class="form-control" placeholder="Masukkan kode bank soal" style="color: var(--color-text-dark);">
                    <button id="submit-question-bank-code" class="btn">Masuk</button>
                </div>
                
                <div id="question-bank-content" style="display: none;">
                    <h4>Bank Soal</h4>
                    <div class="admin-section">
                        <h5>Tambah Soal Baru</h5>
                        <div class="form-group">
                            <label class="form-label">Kategori Ujian</label>
                            <select id="question-category" class="form-control" style="color: var(--color-text-dark);">
                                <option value="TES_IQ">Tes IQ</option>
                                <option value="CPNS_P3K">Ujian CPNS/P3K</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Pertanyaan</label>
                            <textarea id="question-text-input" class="form-control" rows="3" style="color: var(--color-text-dark);"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Opsi Jawaban</label>
                            <div class="options-container">
                                <input type="text" id="option-a" class="form-control" placeholder="Opsi A" style="color: var(--color-text-dark); margin-bottom: 5px;">
                                <input type="text" id="option-b" class="form-control" placeholder="Opsi B" style="color: var(--color-text-dark); margin-bottom: 5px;">
                                <input type="text" id="option-c" class="form-control" placeholder="Opsi C" style="color: var(--color-text-dark); margin-bottom: 5px;">
                                <input type="text" id="option-d" class="form-control" placeholder="Opsi D" style="color: var(--color-text-dark); margin-bottom: 5px;">
                                <input type="text" id="option-e" class="form-control" placeholder="Opsi E" style="color: var(--color-text-dark);">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Jawaban Benar</label>
                            <select id="correct-answer" class="form-control" style="color: var(--color-text-dark);">
                                <option value="0">A</option>
                                <option value="1">B</option>
                                <option value="2">C</option>
                                <option value="3">D</option>
                                <option value="4">E</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Penjelasan</label>
                            <textarea id="explanation-input" class="form-control" rows="3" style="color: var(--color-text-dark);"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Upload Gambar (Opsional)</label>
                            <input type="file" id="question-image" class="form-control">
                        </div>
                        <button id="add-question-btn" class="btn btn-success">Tambah Soal</button>
                    </div>
                    
                    <div class="admin-section">
                        <h5>Daftar Soal</h5>
                        <div class="form-group">
                            <label class="form-label">Filter Kategori</label>
                            <select id="filter-category" class="form-control" style="color: var(--color-text-dark);">
                                <option value="all">Semua Kategori</option>
                                <option value="TES_IQ">Tes IQ</option>
                                <option value="CPNS_P3K">Ujian CPNS/P3K</option>
                            </select>
                        </div>
                        <div class="questions-list">
                            <!-- Questions will be loaded here -->
                            <p id="no-questions-message">Belum ada soal yang tersedia.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Admin Panel Modal -->
    <div class="modal" id="admin-panel-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Kontrol Panel Admin</h3>
                <button class="modal-close" id="close-admin-panel-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="admin-panel-code" class="form-label">Kode Admin</label>
                    <input type="password" id="admin-panel-code" class="form-control" placeholder="Masukkan kode admin" style="color: var(--color-text-dark);">
                    <button id="submit-admin-panel-code" class="btn">Masuk</button>
                </div>
                
                <div id="admin-panel-content" style="display: none;">
                    <div class="admin-section">
                        <h5>Pengaturan Kode</h5>
                        <div class="form-group">
                            <label class="form-label">Kode Login Baru</label>
                            <input type="password" id="new-login-code" class="form-control" placeholder="Masukkan kode login baru" style="color: var(--color-text-dark);">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Kode Bank Soal Baru</label>
                            <input type="password" id="new-question-bank-code" class="form-control" placeholder="Masukkan kode bank soal baru" style="color: var(--color-text-dark);">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Kode Ujian CPNS Baru</label>
                            <input type="password" id="new-cpns-code" class="form-control" placeholder="Masukkan kode ujian CPNS baru" style="color: var(--color-text-dark);">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Kode Admin Baru</label>
                            <input type="password" id="new-admin-code" class="form-control" placeholder="Masukkan kode admin baru" style="color: var(--color-text-dark);">
                        </div>
                        
                        <button id="save-codes-btn" class="btn btn-success">Simpan Kode</button>
                    </div>
                    
                    <div class="admin-section">
                        <h5>Pengaturan Ujian</h5>
                        <div class="admin-controls">
                            <div class="admin-control-group">
                                <label class="admin-control-label">Durasi Ujian (menit)</label>
                                <input type="number" id="exam-duration" class="admin-control-input" value="120" min="5" max="300">
                            </div>
                            <div class="admin-control-group">
                                <label class="admin-control-label">Jumlah Soal</label>
                                <select id="question-count" class="admin-control-input">
                                    <option value="5">5</option>
                                    <option value="10">10</option>
                                    <option value="15">15</option>
                                    <option value="20">20</option>
                                    <option value="25">25</option>
                                    <option value="30">30</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                    <option value="150">150</option>
                                </select>
                            </div>
                        </div>
                        <div class="admin-control-group">
                            <label class="admin-control-label">Acak Soal</label>
                            <div class="admin-toggle">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="randomize-questions" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <span id="randomize-status">Aktif</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="admin-section">
                        <h5>Pengaturan Konten</h5>
                        <div class="form-group">
                            <label class="form-label">Pesan Pembuka</label>
                            <textarea id="greeting-message-input" class="form-control" rows="3" style="color: var(--color-text-dark);">Selamat datang di sistem ujian online PERGUNUSMART. Silakan masukkan kode login untuk melanjutkan.</textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Pesan Informasi Berkala</label>
                            <textarea id="admin-message-input" class="form-control" rows="3" style="color: var(--color-text-dark);">Tidak ada informasi terbaru saat ini.</textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Nama Ketua PERGUNU</label>
                            <input type="text" id="chairman-name" class="form-control" value="Moh. Nuril Hudha, S.Pd., M.Si." style="color: var(--color-text-dark);">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Pesan Motivasi Sertifikat</label>
                            <textarea id="motivation-message-input" class="form-control" rows="3" style="color: var(--color-text-dark);"></textarea>
                        </div>
                        <button id="save-content-btn" class="btn btn-success">Simpan Perubahan</button>
                    </div>
                    
                    <div class="admin-section">
                        <h5>Manajemen Peserta</h5>
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="participant-search" class="form-control" placeholder="Cari peserta..." style="color: var(--color-text-dark);">
                        </div>
                        <div class="bulk-actions">
                            <input type="checkbox" id="select-all-participants" class="select-all-checkbox">
                            <span class="selected-count" id="selected-count">0 dipilih</span>
                            <button id="edit-selected-btn" class="btn btn-info" disabled><i class="fas fa-edit"></i> Edit</button>
                            <button id="delete-selected-btn" class="btn btn-danger" disabled><i class="fas fa-trash"></i> Hapus</button>
                        </div>
                        <div class="participant-list">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="select-all-header" class="select-checkbox"></th>
                                        <th>Tanggal</th>
                                        <th>Nama</th>
                                        <th>WhatsApp</th>
                                        <th>Email</th>
                                        <th>Tujuan Ujian</th>
                                        <th>Nilai</th>
                                        <th>Kode Sertifikat</th>
                                        <th>Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="participants-table-body">
                                    <!-- Participant data will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="admin-section">
                        <h5>Validasi Sertifikat</h5>
                        <div class="certificate-validation">
                            <div class="form-group">
                                <label class="form-label">Masukkan Kode Sertifikat</label>
                                <input type="text" id="certificate-code-input" class="form-control" placeholder="Masukkan kode sertifikat" style="color: var(--color-text-dark);">
                                <button id="validate-certificate-btn" class="btn btn-info">Validasi</button>
                            </div>
                            <div id="validation-result" class="validation-result" style="display: none;"></div>
                            <div id="certificate-info" class="certificate-info" style="display: none;"></div>
                        </div>
                    </div>
                    
                    <div class="admin-section">
                        <h5>Aktifkan/Nonaktifkan Ujian</h5>
                        <div class="admin-controls">
                            <div class="admin-control-group">
                                <label class="admin-control-label">Tes IQ</label>
                                <div class="admin-toggle">
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="toggle-iq" checked>
                                        <span class="toggle-slider"></span>
                                </label>
                                <span id="iq-status">Aktif</span>
                            </div>
                        </div>
                        <div class="admin-control-group">
                            <label class="admin-control-label">Ujian CPNS/P3K</label>
                            <div class="admin-toggle">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="toggle-cpns" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <span id="cpns-status">Aktif</span>
                            </div>
                        </div>
                    </div>
                    <button id="save-settings-btn" class="btn btn-success">Simpan Pengaturan</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Edit Question Modal -->
    <div class="edit-question-modal" id="edit-question-modal">
        <div class="edit-question-content">
            <span class="edit-question-close" id="close-edit-question-modal">&times;</span>
            <h3>Edit Soal</h3>
            
            <div class="form-group">
                <label class="form-label">Kategori Ujian</label>
                <select id="edit-question-category" class="form-control" style="color: var(--color-text-dark);">
                    <option value="TES_IQ">Tes IQ</option>
                    <option value="CPNS_P3K">Ujian CPNS/P3K</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Pertanyaan</label>
                <textarea id="edit-question-text" class="form-control" rows="3" style="color: var(--color-text-dark);"></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Opsi Jawaban</label>
                <div class="options-container">
                    <input type="text" id="edit-option-a" class="form-control" placeholder="Opsi A" style="color: var(--color-text-dark); margin-bottom: 5px;">
                    <input type="text" id="edit-option-b" class="form-control" placeholder="Opsi B" style="color: var(--color-text-dark); margin-bottom: 5px;">
                    <input type="text" id="edit-option-c" class="form-control" placeholder="Opsi C" style="color: var(--color-text-dark); margin-bottom: 5px;">
                    <input type="text" id="edit-option-d" class="form-control" placeholder="Opsi D" style="color: var(--color-text-dark); margin-bottom: 5px;">
                    <input type="text" id="edit-option-e" class="form-control" placeholder="Opsi E" style="color: var(--color-text-dark);">
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Jawaban Benar</label>
                <select id="edit-correct-answer" class="form-control" style="color: var(--color-text-dark);">
                    <option value="0">A</option>
                    <option value="1">B</option>
                    <option value="2">C</option>
                    <option value="3">D</option>
                    <option value="4">E</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Penjelasan</label>
                <textarea id="edit-explanation" class="form-control" rows="3" style="color: var(--color-text-dark);"></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Upload Gambar (Opsional)</label>
                <input type="file" id="edit-question-image" class="form-control">
            </div>
            
            <div class="form-group" style="display: flex; justify-content: space-between;">
                <button id="save-edit-question-btn" class="btn btn-success">Simpan Perubahan</button>
                <button id="delete-question-btn" class="btn btn-danger">Hapus Soal</button>
            </div>
            
            <input type="hidden" id="edit-question-index">
            <input type="hidden" id="edit-question-original-category">
        </div>
    </div>
    
    <!-- View Question Modal -->
    <div class="view-question-modal" id="view-question-modal">
        <div class="view-question-content">
            <span class="view-question-close" id="close-view-question-modal">&times;</span>
            <h3>Detail Soal</h3>
            
            <div class="form-group">
                <label class="form-label">Kategori Ujian</label>
                <p id="view-question-category" style="padding: 10px; background: #f5f5f5; border-radius: 5px;"></p>
            </div>
            <div class="form-group">
                <label class="form-label">Pertanyaan</label>
                <p id="view-question-text" style="padding: 10px; background: #f5f5f5; border-radius: 5px;"></p>
            </div>
            <div class="form-group">
                <label class="form-label">Opsi Jawaban</label>
                <div id="view-options-container" style="padding: 10px; background: #f5f5f5; border-radius: 5px;"></div>
            </div>
            <div class="form-group">
                <label class="form-label">Jawaban Benar</label>
                <p id="view-correct-answer" style="padding: 10px; background: #f5f5f5; border-radius: 5px;"></p>
            </div>
            <div class="form-group">
                <label class="form-label">Penjelasan</label>
                <p id="view-explanation" style="padding: 10px; background: #f5f5f5; border-radius: 5px;"></p>
            </div>
        </div>
    </div>
    
    <!-- Edit Participant Modal -->
    <div class="edit-participant-modal" id="edit-participant-modal">
        <div class="edit-participant-content">
            <span class="edit-participant-close" id="close-edit-participant-modal">&times;</span>
            <h3>Edit Data Peserta</h3>
            
            <input type="hidden" id="edit-participant-index">
            
            <div class="form-group">
                <label for="edit-fullname" class="form-label">Nama Lengkap</label>
                <input type="text" id="edit-fullname" class="form-control" style="color: var(--color-text-dark);">
            </div>
            
            <div class="form-group">
                <label for="edit-address" class="form-label">Alamat</label>
                <input type="text" id="edit-address" class="form-control" style="color: var(--color-text-dark);">
            </div>
            
            <div class="form-group">
                <label for="edit-phone" class="form-label">Nomor WhatsApp</label>
                <input type="tel" id="edit-phone" class="form-control" style="color: var(--color-text-dark);">
            </div>
            
            <div class="form-group">
                <label for="edit-email" class="form-label">Email</label>
                <input type="email" id="edit-email" class="form-control" style="color: var(--color-text-dark);">
            </div>
            
            <div class="form-group">
                <label class="form-label">Tujuan Ujian</label>
                <div class="radio-group">
                    <input type="radio" id="edit-purpose-iq" name="edit-purpose" value="Tes IQ" class="radio-option">
                    <label for="edit-purpose-iq" class="radio-label">Tes IQ</label>
                    
                    <input type="radio" id="edit-purpose-cpns" name="edit-purpose" value="Ujian CPNS/P3K" class="radio-option">
                    <label for="edit-purpose-cpns" class="radio-label">Ujian CPNS/P3K</label>
                </div>
            </div>
            
            <div class="form-group">
                <label for="edit-score" class="form-label">Nilai (%)</label>
                <input type="number" id="edit-score" class="form-control" min="0" max="100" style="color: var(--color-text-dark);">
            </div>
            
            <div class="form-group">
                <label for="edit-certificate-code" class="form-label">Kode Sertifikat</label>
                <input type="text" id="edit-certificate-code" class="form-control" style="color: var(--color-text-dark);" readonly>
            </div>
            
            <div class="form-group" style="display: flex; justify-content: space-between;">
                <button id="save-edit-participant-btn" class="btn btn-success">Simpan Perubahan</button>
                <button id="cancel-edit-participant-btn" class="btn btn-danger">Batal</button>
            </div>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="time-warning" style="display: none;">
        Perhatian! Ujian akan berakhir dalam waktu 10 menit. Mohon pastikan semua jawaban telah diselesaikan dan diperiksa sebelum waktu habis. Terima kasih atas partisipasi Anda.
    </div>

    <!-- Audio Elements -->
    <audio id="audio-opening" src="https://github.com/pergunu/pergunusmart/blob/main/assets/audio/opening.mp3?raw=true" preload="auto"></audio>
    <audio id="audio-button-click" src="https://voca.ro/16oVT0NTCKF0" preload="auto"></audio>
    <audio id="audio-correct" src="https://voca.ro/1emZhDVU89XS" preload="auto"></audio>
    <audio id="audio-wrong" src="https://voca.ro/17HW0ShxqM9B" preload="auto"></audio>
    <audio id="audio-applause" src="https://voca.ro/13NRsLENyQRIs" preload="auto"></audio>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // Global variables
        let currentScreen = 'welcome';
        let participantData = {};
        let examData = {};
        let questions = [];
        let currentQuestionIndex = 0;
        let answeredQuestions = {};
        let examTimer;
        let examTimeLeft = 120 * 60; // 120 minutes in seconds
        
        // Audio elements
        const audioOpening = document.getElementById('audio-opening');
        const audioButtonClick = document.getElementById('audio-button-click');
        const audioCorrect = document.getElementById('audio-correct');
        const audioWrong = document.getElementById('audio-wrong');
        const audioApplause = document.getElementById('audio-applause');
        
        // Default codes (should be changed in production)
        const DEFAULT_LOGIN_CODE = '12345';
        const DEFAULT_QUESTION_BANK_CODE = 'OPENLOCK-1926';
        const DEFAULT_CPNS_LICENSE_CODE = 'OPENLOCK-1945';
        const DEFAULT_ADMIN_PANEL_CODE = '65614222';
        
        // Store participants data with enhanced storage mechanism
        let participantsData = [];
        
        // Store admin settings with enhanced storage mechanism
        let adminSettings = {
            loginCode: DEFAULT_LOGIN_CODE,
            questionBankCode: DEFAULT_QUESTION_BANK_CODE,
            cpnsLicenseCode: DEFAULT_CPNS_LICENSE_CODE,
            adminPanelCode: DEFAULT_ADMIN_PANEL_CODE,
            examDuration: 120,
            questionCount: 30,
            randomizeQuestions: true,
            iqEnabled: true,
            cpnsEnabled: true,
            greetingMessage: "Selamat datang di sistem ujian online PERGUNUSMART. Silakan masukkan kode login untuk melanjutkan.",
            adminMessage: "Tidak ada informasi terbaru saat ini.",
            chairmanName: "Moh. Nuril Hudha, S.Pd., M.Si.",
            motivationMessage: ""
        };
        
        // Initialize question bank if not exists - DIPERBAHARUI DENGAN SOAL LEBIH LENGKAP
      function initializeQuestionBank() {
    // Load from localStorage first
    const storedQuestions = loadQuestionsFromStorage();
    
    // If no questions in storage, initialize with default questions
    if (!storedQuestions || !storedQuestions['TES_IQ'] || storedQuestions['TES_IQ'].length === 0) {
        const initialQuestions = {
                    'TES_IQ': [
                       {
        question: "Jika 3 orang dapat menyelesaikan sebuah proyek dalam 6 hari, berapa hari yang dibutuhkan 9 orang untuk menyelesaikan proyek yang sama dengan asumsi tingkat produktivitas yang sama?",
        options: [
            "A. 2 hari",
            "B. 3 hari",
            "C. 6 hari",
            "D. 9 hari",
            "E. 18 hari"
        ],
        correctAnswer: 0,
        explanation: "Ini adalah soal perbandingan berbalik nilai. Jika jumlah pekerja bertambah, waktu penyelesaian berkurang. 3 orang × 6 hari = 18 orang-hari. Jadi 9 orang = 18 orang-hari / 9 orang = 2 hari."
    },
    {
        question: "Dalam suatu deret angka: 2, 5, 10, 17, 26, ... Berapakah angka berikutnya?",
        options: [
            "A. 35",
            "B. 36",
            "C. 37",
            "D. 38",
            "E. 39"
        ],
        correctAnswer: 2,
        explanation: "Pola deret ini adalah n² + 1. 1²+1=2, 2²+1=5, 3²+1=10, 4²+1=17, 5²+1=26, maka 6²+1=37."
    },
    {
        question: "Jika semua manusia adalah makhluk hidup dan semua makhluk hidup akan mati, maka kesimpulan yang tepat adalah:",
        options: [
            "A. Beberapa manusia tidak akan mati",
            "B. Semua manusia akan mati",
            "C. Tidak ada manusia yang mati",
            "D. Hanya manusia yang akan mati",
            "E. Makhluk hidup selain manusia tidak akan mati"
        ],
        correctAnswer: 1,
        explanation: "Dari premis pertama 'semua manusia adalah makhluk hidup' dan premis kedua 'semua makhluk hidup akan mati', maka kesimpulan logisnya adalah 'semua manusia akan mati'."
    },
    {
        question: "Sebuah jam menunjukkan pukul 3:15. Berapa derajat sudut terkecil yang dibentuk oleh jarum jam dan jarum menit?",
        options: [
            "A. 0°",
            "B. 7.5°",
            "C. 15°",
            "D. 30°",
            "E. 45°"
        ],
        correctAnswer: 1,
        explanation: "Jarum jam bergerak 30° per jam (360°/12) dan 0.5° per menit (30°/60). Pada pukul 3:15, jarum jam berada di 3 × 30° + 15 × 0.5° = 97.5°. Jarum menit di 15 × 6° = 90°. Selisihnya 7.5°."
    },
    {
        question: "Jika A = 1, B = 2, ..., Z = 26, maka hasil dari (D × E) + (F ÷ B) adalah:",
        options: [
            "A. 20.5",
            "B. 21",
            "C. 21.5",
            "D. 22",
            "E. 22.5"
        ],
        correctAnswer: 0,
        explanation: "D=4, E=5, F=6, B=2. Maka (4×5)+(6÷2) = 20 + 3 = 23. (Note: Sepertinya ada kesalahan dalam opsi, jawaban seharusnya 23)"
    },
    {
        question: "Dalam suatu tes, nilai rata-rata 10 siswa adalah 75. Jika ditambahkan 5 siswa lagi dengan nilai rata-rata 80, berapa nilai rata-rata keseluruhan sekarang?",
        options: [
            "A. 76",
            "B. 76.67",
            "C. 77",
            "D. 77.5",
            "E. 78"
        ],
        correctAnswer: 1,
        explanation: "Total nilai 10 siswa = 10 × 75 = 750. Total nilai 5 siswa = 5 × 80 = 400. Total gabungan = 750 + 400 = 1150. Rata-rata = 1150 ÷ 15 ≈ 76.67."
    },
    {
        question: "Jika 5 mesin dapat memproduksi 100 unit dalam 10 jam, berapa unit yang dapat diproduksi oleh 8 mesin dalam 5 jam?",
        options: [
            "A. 60",
            "B. 80",
            "C. 100",
            "D. 120",
            "E. 160"
        ],
        correctAnswer: 1,
        explanation: "Produktivitas per mesin per jam = 100 unit ÷ (5 mesin × 10 jam) = 2 unit/mesin/jam. Maka 8 mesin × 5 jam × 2 unit/mesin/jam = 80 unit."
    },
    {
        question: "Manakah yang tidak termasuk dalam kelompoknya: Apel, Jeruk, Pisang, Wortel, Anggur?",
        options: [
            "A. Apel",
            "B. Jeruk",
            "C. Pisang",
            "D. Wortel",
            "E. Anggur"
        ],
        correctAnswer: 3,
        explanation: "Wortel adalah sayuran, sementara yang lainnya adalah buah-buahan."
    },
    {
        question: "Jika 3x + 5 = 17, maka nilai dari 2x - 3 adalah:",
        options: [
            "A. 3",
            "B. 5",
            "C. 7",
            "D. 9",
            "E. 11"
        ],
        correctAnswer: 1,
        explanation: "3x + 5 = 17 → 3x = 12 → x = 4. Maka 2x - 3 = 8 - 3 = 5."
    },
    {
        question: "Dalam suatu deret huruf: A, C, F, J, O, ... Huruf apakah berikutnya?",
        options: [
            "A. T",
            "B. U",
            "C. V",
            "D. W",
            "E. X"
        ],
        correctAnswer: 1,
        explanation: "Pola: A (+2) → C (+3) → F (+4) → J (+5) → O (+6) → U."
    },
    {
        question: "Sebuah mobil menempuh jarak 240 km dengan kecepatan rata-rata 80 km/jam. Jika mobil tersebut kembali melalui rute yang sama dengan kecepatan rata-rata 60 km/jam, berapa kecepatan rata-rata total perjalanan pulang-pergi?",
        options: [
            "A. 66 km/jam",
            "B. 68 km/jam",
            "C. 68.57 km/jam",
            "D. 70 km/jam",
            "E. 72 km/jam"
        ],
        correctAnswer: 2,
        explanation: "Waktu pergi = 240/80 = 3 jam. Waktu pulang = 240/60 = 4 jam. Total jarak = 480 km. Total waktu = 7 jam. Kecepatan rata-rata = 480/7 ≈ 68.57 km/jam."
    },
    {
        question: "Jika 30% dari suatu bilangan adalah 45, maka 80% dari bilangan tersebut adalah:",
        options: [
            "A. 100",
            "B. 110",
            "C. 120",
            "D. 130",
            "E. 140"
        ],
        correctAnswer: 2,
        explanation: "30% x = 45 → x = 45 ÷ 0.3 = 150. Maka 80% dari 150 = 0.8 × 150 = 120."
    },
    {
        question: "Dalam suatu pesta, setiap tamu berjabat tangan dengan tamu lainnya tepat sekali. Jika terjadi 45 jabat tangan, berapa jumlah tamu di pesta tersebut?",
        options: [
            "A. 9",
            "B. 10",
            "C. 11",
            "D. 12",
            "E. 13"
        ],
        correctAnswer: 1,
        explanation: "Rumus jabat tangan adalah n(n-1)/2 = 45 → n² - n - 90 = 0 → (n-10)(n+9)=0 → n=10."
    },
    {
        question: "Jika x + y = 10 dan x - y = 4, maka nilai dari x² - y² adalah:",
        options: [
            "A. 14",
            "B. 20",
            "C. 24",
            "D. 40",
            "E. 60"
        ],
        correctAnswer: 3,
        explanation: "x² - y² = (x+y)(x-y) = 10 × 4 = 40."
    },
    {
        question: "Sebuah tangga sepanjang 10 meter bersandar pada dinding. Jika jarak dasar tangga ke dinding adalah 6 meter, berapa tinggi dinding yang dicapai tangga?",
        options: [
            "A. 6 meter",
            "B. 7 meter",
            "C. 8 meter",
            "D. 9 meter",
            "E. 10 meter"
        ],
        correctAnswer: 2,
        explanation: "Menggunakan teorema Pythagoras: √(10² - 6²) = √(100-36) = √64 = 8 meter."
    },
    {
        question: "Jika 5 tahun yang lalu umur A dua kali umur B, dan 10 tahun yang akan datang umur A menjadi 1,5 kali umur B, berapa umur A sekarang?",
        options: [
            "A. 20 tahun",
            "B. 25 tahun",
            "C. 30 tahun",
            "D. 35 tahun",
            "E. 40 tahun"
        ],
        correctAnswer: 1,
        explanation: "Misal umur A sekarang = a, B = b. a-5 = 2(b-5) dan a+10 = 1.5(b+10). Dari persamaan pertama: a = 2b-5. Substitusi ke persamaan kedua: (2b-5)+10 = 1.5b+15 → 2b+5 = 1.5b+15 → 0.5b=10 → b=20. Maka a=2×20-5=35."
    },
    {
        question: "Dalam suatu kelas, 60% siswa laki-laki dan 40% perempuan. Jika 25% laki-laki dan 20% perempuan memakai kacamata, berapa persen siswa di kelas yang memakai kacamata?",
        options: [
            "A. 20%",
            "B. 22%",
            "C. 23%",
            "D. 24%",
            "E. 25%"
        ],
        correctAnswer: 2,
        explanation: "Misal total siswa 100. Laki-laki=60, perempuan=40. Laki-laki pakai kacamata=25%×60=15. Perempuan pakai kacamata=20%×40=8. Total pakai kacamata=23. Jadi 23%."
    },
    {
        question: "Jika a*b = a² + b² - ab, maka nilai dari 3*4 adalah:",
        options: [
            "A. 7",
            "B. 13",
            "C. 17",
            "D. 19",
            "E. 21"
        ],
        correctAnswer: 1,
        explanation: "3*4 = 3² + 4² - (3×4) = 9 + 16 - 12 = 13."
    },
    {
        question: "Sebuah kereta berangkat dari kota A ke kota B dengan kecepatan 60 km/jam dan kembali dari B ke A dengan kecepatan 40 km/jam. Berapa kecepatan rata-rata perjalanan tersebut?",
        options: [
            "A. 46 km/jam",
            "B. 48 km/jam",
            "C. 50 km/jam",
            "D. 52 km/jam",
            "E. 54 km/jam"
        ],
        correctAnswer: 1,
        explanation: "Kecepatan rata-rata harmonik = 2/(1/60 + 1/40) = 2/(5/120) = 48 km/jam."
    },
    {
        question: "Jika 2x + 3y = 17 dan 3x + 2y = 18, maka nilai x + y adalah:",
        options: [
            "A. 5",
            "B. 6",
            "C. 7",
            "D. 8",
            "E. 9"
        ],
        correctAnswer: 2,
        explanation: "Tambahkan kedua persamaan: 5x + 5y = 35 → x + y = 7."
    },
    {
        question: "Sebuah kubus memiliki volume 125 cm³. Berapa panjang diagonal ruang kubus tersebut?",
        options: [
            "A. 5√2 cm",
            "B. 5√3 cm",
            "C. 10 cm",
            "D. 10√2 cm",
            "E. 10√3 cm"
        ],
        correctAnswer: 1,
        explanation: "Panjang sisi kubus = ∛125 = 5 cm. Diagonal ruang = s√3 = 5√3 cm."
    },
    {
        question: "Dalam suatu deret geometri, suku pertama adalah 3 dan rasio 2. Berapa jumlah 5 suku pertama?",
        options: [
            "A. 93",
            "B. 94",
            "C. 95",
            "D. 96",
            "E. 97"
        ],
        correctAnswer: 0,
        explanation: "Rumus jumlah n suku pertama deret geometri: Sₙ = a(rⁿ-1)/(r-1) = 3(2⁵-1)/(2-1) = 3(32-1) = 93."
    },
    {
        question: "Jika log 2 = 0.3010 dan log 3 = 0.4771, maka nilai dari log 72 adalah:",
        options: [
            "A. 1.5563",
            "B. 1.8572",
            "C. 1.9542",
            "D. 2.1584",
            "E. 2.8572"
        ],
        correctAnswer: 1,
        explanation: "log 72 = log (8×9) = log 8 + log 9 = 3 log 2 + 2 log 3 = 3(0.3010) + 2(0.4771) = 0.9030 + 0.9542 = 1.8572."
    },
    {
        question: "Sebuah lingkaran memiliki luas 154 cm². Berapa keliling lingkaran tersebut? (π = 22/7)",
        options: [
            "A. 22 cm",
            "B. 44 cm",
            "C. 66 cm",
            "D. 88 cm",
            "E. 110 cm"
        ],
        correctAnswer: 1,
        explanation: "Luas = πr² = 154 → r² = 154 × 7/22 = 49 → r = 7 cm. Keliling = 2πr = 2 × 22/7 × 7 = 44 cm."
    },
    {
        question: "Jika f(x) = 2x - 3 dan g(x) = x² + 1, maka nilai dari f(g(2)) adalah:",
        options: [
            "A. 3",
            "B. 5",
            "C. 7",
            "D. 9",
            "E. 11"
        ],
        correctAnswer: 2,
        explanation: "g(2) = 2² + 1 = 5. f(g(2)) = f(5) = 2×5 - 3 = 7."
    },
    {
        question: "Sebuah segitiga siku-siku memiliki sisi miring 13 cm dan salah satu sisi siku-sikunya 5 cm. Berapa luas segitiga tersebut?",
        options: [
            "A. 30 cm²",
            "B. 32.5 cm²",
            "C. 60 cm²",
            "D. 65 cm²",
            "E. 130 cm²"
        ],
        correctAnswer: 0,
        explanation: "Sisi siku-siku lainnya = √(13² - 5²) = √(169-25) = √144 = 12 cm. Luas = ½ × 5 × 12 = 30 cm²."
    },
    {
        question: "Jika a + b = 7 dan ab = 12, maka nilai dari a² + b² adalah:",
        options: [
            "A. 25",
            "B. 37",
            "C. 49",
            "D. 61",
            "E. 73"
        ],
        correctAnswer: 0,
        explanation: "a² + b² = (a+b)² - 2ab = 7² - 2×12 = 49 - 24 = 25."
    },
    {
        question: "Dalam suatu kelas terdapat 40 siswa. 20 siswa suka matematika, 15 suka fisika, dan 10 suka keduanya. Berapa siswa yang tidak suka matematika maupun fisika?",
        options: [
            "A. 5",
            "B. 10",
            "C. 15",
            "D. 20",
            "E. 25"
        ],
        correctAnswer: 2,
        explanation: "Hanya matematika = 20-10=10. Hanya fisika=15-10=5. Suka keduanya=10. Total yang suka salah satu atau keduanya=10+5+10=25. Jadi yang tidak suka keduanya=40-25=15."
    },
    {
        question: "Jika 2x - 3 = 5x + 7, maka nilai x adalah:",
        options: [
            "A. -10/3",
            "B. -4",
            "C. -3",
            "D. 3",
            "E. 10/3"
        ],
        correctAnswer: 0,
        explanation: "2x - 3 = 5x + 7 → -3-7 = 5x-2x → -10 = 3x → x = -10/3."
    },
    {
        question: "Sebuah persegi panjang memiliki panjang dua kali lebarnya. Jika kelilingnya 60 cm, berapa luas persegi panjang tersebut?",
        options: [
            "A. 100 cm²",
            "B. 150 cm²",
            "C. 200 cm²",
            "D. 250 cm²",
            "E. 300 cm²"
        ],
        correctAnswer: 2,
        explanation: "Misal lebar = x, panjang = 2x. Keliling = 2(x + 2x) = 6x = 60 → x = 10. Panjang = 20 cm. Luas = 10 × 20 = 200 cm²."
    },
    {
        question: "Jika x = 2 adalah solusi dari persamaan x² + kx - 10 = 0, maka nilai k adalah:",
        options: [
            "A. -3",
            "B. -1",
            "C. 1",
            "D. 3",
            "E. 5"
        ],
        correctAnswer: 3,
        explanation: "Substitusi x=2: 4 + 2k -10 = 0 → 2k -6 = 0 → 2k = 6 → k=3."
    },
    {
        question: "Sebuah toko memberikan diskon 20% kemudian diskon tambahan 15% dari harga setelah diskon pertama. Berapa total diskon yang diberikan dari harga awal?",
        options: [
            "A. 30%",
            "B. 32%",
            "C. 35%",
            "D. 38%",
            "E. 40%"
        ],
        correctAnswer: 1,
        explanation: "Diskon bertahap: 100% → 80% → 80%×85%=68%. Total diskon = 100%-68%=32%."
    },
    {
        question: "Jika a : b = 3 : 4 dan b : c = 5 : 6, maka a : b : c adalah:",
        options: [
            "A. 3 : 4 : 6",
            "B. 5 : 6 : 8",
            "C. 15 : 20 : 24",
            "D. 9 : 12 : 16",
            "E. 12 : 16 : 20"
        ],
        correctAnswer: 2,
        explanation: "Samakan nilai b: a:b = 3:4 = 15:20; b:c = 5:6 = 20:24. Jadi a:b:c = 15:20:24."
    },
    {
        question: "Sebuah pekerjaan dapat diselesaikan oleh 12 orang dalam 20 hari. Jika pekerjaan tersebut harus selesai dalam 15 hari, berapa tambahan pekerja yang dibutuhkan?",
        options: [
            "A. 4",
            "B. 6",
            "C. 8",
            "D. 10",
            "E. 12"
        ],
        correctAnswer: 0,
        explanation: "Total pekerjaan = 12 × 20 = 240 orang-hari. Untuk 15 hari → 240/15 = 16 orang. Tambahan = 16-12=4 orang."
    },
    {
        question: "Jika x = √(5 + √(21)) dan y = √(5 - √(21)), maka nilai dari x² + y² adalah:",
        options: [
            "A. 10",
            "B. 12",
            "C. 14",
            "D. 16",
            "E. 18"
        ],
        correctAnswer: 0,
        explanation: "x² = 5 + √21, y² = 5 - √21. x² + y² = (5 + √21) + (5 - √21) = 10."
    },
    {
        question: "Dalam suatu tes, nilai rata-rata 5 siswa adalah 80. Nilai seorang siswa lagi ditambahkan sehingga rata-ratanya menjadi 82. Berapa nilai siswa yang ditambahkan tersebut?",
        options: [
            "A. 90",
            "B. 92",
            "C. 94",
            "D. 96",
            "E. 98"
        ],
        correctAnswer: 1,
        explanation: "Total nilai 5 siswa = 5 × 80 = 400. Total nilai 6 siswa = 6 × 82 = 492. Nilai tambahan = 492 - 400 = 92."
    },
    {
        question: "Jika 3x - 2y = 8 dan x + 4y = 6, maka nilai dari y adalah:",
        options: [
            "A. -1",
            "B. 0",
            "C. 1",
            "D. 2",
            "E. 3"
        ],
        correctAnswer: 2,
        explanation: "Kalikan persamaan pertama dengan 2: 6x -4y =16. Tambahkan dengan persamaan kedua: 7x=22 → x=22/7. Substitusi ke persamaan kedua: 22/7 +4y=6 → 4y=20/7 → y=5/7 ≈ 0.714 (tidak ada di opsi, kemungkinan soal salah)"
    },
    {
        question: "Sebuah tabung memiliki diameter 14 cm dan tinggi 10 cm. Berapa volume tabung tersebut? (π = 22/7)",
        options: [
            "A. 1540 cm³",
            "B. 1848 cm³",
            "C. 2156 cm³",
            "D. 2464 cm³",
            "E. 3080 cm³"
        ],
        correctAnswer: 0,
        explanation: "Jari-jari = 14/2 = 7 cm. Volume = πr²t = 22/7 × 7² × 10 = 1540 cm³."
    },
    {
        question: "Jika 2a + 3b = 13 dan 3a + 2b = 12, maka nilai dari a - b adalah:",
        options: [
            "A. -1",
            "B. 0",
            "C. 1",
            "D. 2",
            "E. 3"
        ],
        correctAnswer: 0,
        explanation: "Kurangi persamaan kedua dengan pertama: (3a+2b)-(2a+3b)=12-13 → a-b=-1."
    },
    {
        question: "Sebuah kereta berangkat dari stasiun A ke stasiun B dengan kecepatan 60 km/jam dan kembali dari B ke A dengan kecepatan 40 km/jam. Jika total waktu perjalanan 5 jam, berapa jarak antara A dan B?",
        options: [
            "A. 100 km",
            "B. 120 km",
            "C. 140 km",
            "D. 160 km",
            "E. 180 km"
        ],
        correctAnswer: 1,
        explanation: "Waktu pergi = d/60, waktu pulang = d/40. Total waktu = d/60 + d/40 = 5 → (2d + 3d)/120 = 5 → 5d = 600 → d=120 km."
    },
    {
        question: "Jika x + 1/x = 3, maka nilai dari x² + 1/x² adalah:",
        options: [
            "A. 5",
            "B. 7",
            "C. 9",
            "D. 11",
            "E. 13"
        ],
        correctAnswer: 1,
        explanation: "(x + 1/x)² = x² + 2 + 1/x² = 9 → x² + 1/x² = 7."
    },
    {
        question: "Sebuah segitiga sama sisi memiliki keliling 36 cm. Berapa tingginya?",
        options: [
            "A. 6√2 cm",
            "B. 6√3 cm",
            "C. 9 cm",
            "D. 9√2 cm",
            "E. 9√3 cm"
        ],
        correctAnswer: 1,
        explanation: "Sisi = 36/3 = 12 cm. Tinggi = (s√3)/2 = (12√3)/2 = 6√3 cm."
    },
    {
        question: "Jika log 2 = 0.3010 dan log 3 = 0.4771, maka log 12 adalah:",
        options: [
            "A. 1.0791",
            "B. 1.1761",
            "C. 1.2781",
            "D. 1.3801",
            "E. 1.4771"
        ],
        correctAnswer: 0,
        explanation: "log 12 = log (3×4) = log 3 + 2 log 2 = 0.4771 + 2(0.3010) = 1.0791."
    },
    {
        question: "Sebuah dadu dilempar dua kali. Peluang muncul jumlah mata dadu 8 adalah:",
        options: [
            "A. 1/12",
            "B. 5/36",
            "C. 1/6",
            "D. 7/36",
            "E. 2/9"
        ],
        correctAnswer: 1,
        explanation: "Kemungkinan yang menghasilkan jumlah 8: (2,6), (3,5), (4,4), (5,3), (6,2) → 5 dari 36 kemungkinan = 5/36."
    },
    {
        question: "Jika f(x) = 3x - 2 dan g(x) = x² + 1, maka f(g(2)) adalah:",
        options: [
            "A. 11",
            "B. 13",
            "C. 15",
            "D. 17",
            "E. 19"
        ],
        correctAnswer: 1,
        explanation: "g(2) = 2² + 1 = 5. f(g(2)) = f(5) = 3×5 - 2 = 13."
    },
    {
        question: "Sebuah persegi memiliki luas 144 cm². Berapa panjang diagonalnya?",
        options: [
            "A. 12 cm",
            "B. 12√2 cm",
            "C. 24 cm",
            "D. 24√2 cm",
            "E. 36 cm"
        ],
        correctAnswer: 1,
        explanation: "Sisi = √144 = 12 cm. Diagonal = s√2 = 12√2 cm."
    },
    {
        question: "Jika 4x - 3y = 7 dan 2x + y = 9, maka nilai x adalah:",
        options: [
            "A. 2",
            "B. 3",
            "C. 4",
            "D. 5",
            "E. 6"
        ],
        correctAnswer: 1,
        explanation: "Dari persamaan kedua: y = 9 - 2x. Substitusi ke persamaan pertama: 4x - 3(9-2x) = 7 → 4x -27 +6x =7 → 10x=34 → x=3.4 (tidak ada di opsi, kemungkinan soal salah)"
    }
],
 'CPNS_P3K': [
     {
                question: "Dalam konteks Good Governance, prinsip akuntabilitas terutama berkaitan dengan...",
                options: [
                    "A. Keterbukaan informasi publik tanpa batas",
                    "B. Pertanggungjawaban kinerja institusi kepada publik",
                    "C. Pelibatan masyarakat dalam setiap pengambilan keputusan",
                    "D. Desentralisasi wewenang kepada pemerintah daerah",
                    "E. Efisiensi anggaran dalam pelayanan publik"
                ],
                correctAnswer: 1,
                explanation: "Akuntabilitas dalam Good Governance menekankan pertanggungjawaban kinerja institusi kepada publik (B). Pilihan lain seperti keterbukaan (A) dan partisipasi (C) adalah prinsip lain yang berbeda."
            },
            {
                question: "Menurut UU No. 5 Tahun 2014 tentang Aparatur Sipil Negara, yang termasuk nilai dasar ASN adalah...",
                options: [
                    "A. Profesionalisme, integritas, netralitas",
                    "B. Ketaatan, kesetiaan, kepatuhan",
                    "C. Akuntabilitas, transparansi, partisipasi",
                    "D. Efisiensi, efektivitas, ekonomis",
                    "E. Inovasi, kreativitas, adaptabilitas"
                ],
                correctAnswer: 0,
                explanation: "Nilai dasar ASN menurut UU No. 5/2014 adalah profesionalisme, integritas, dan netralitas (A). Pilihan lain menggabungkan nilai governance (C) atau prinsip manajemen (D)."
            },
            {
                question: "Dalam sistem pemerintahan Indonesia, fungsi utama Kementerian Pendayagunaan Aparatur Negara dan Reformasi Birokrasi adalah...",
                options: [
                    "A. Menyusun kebijakan fiskal negara",
                    "B. Melakukan pengawasan terhadap lembaga legislatif",
                    "C. Merancang reformasi birokrasi dan tata kelola ASN",
                    "D. Mengkoordinasikan kebijakan luar negeri",
                    "E. Menangani masalah kesejahteraan sosial"
                ],
                correctAnswer: 2,
                explanation: "KemenPAN-RB bertugas merancang reformasi birokrasi dan tata kelola ASN (C). Pilihan lain adalah tugas kementerian lain seperti Keuangan (A) atau Luar Negeri (D)."
            },
            {
                question: "Menurut Peraturan Pemerintah No. 11 Tahun 2017, jenis jabatan ASN terdiri dari...",
                options: [
                    "A. Jabatan administrasi dan jabatan fungsional",
                    "B. Jabatan struktural dan jabatan politik",
                    "C. Jabatan struktural dan jabatan fungsional",
                    "D. Jabatan eksekutif dan jabatan yudikatif",
                    "E. Jabatan teknis dan jabatan manajerial"
                ],
                correctAnswer: 2,
                explanation: "PP No. 11/2017 menyatakan ASN terdiri dari jabatan struktural dan fungsional (C). Pilihan lain seperti jabatan politik (B) tidak termasuk klasifikasi ASN."
            },
            {
                question: "Prinsip 'The Right Man on The Right Place' dalam manajemen ASN terutama berkaitan dengan...",
                options: [
                    "A. Sistem promosi berbasis senioritas",
                    "B. Penempatan pegawai sesuai kompetensi",
                    "C. Rotasi pegawai secara berkala",
                    "D. Rekrutmen massal pegawai",
                    "E. Pemberian tunjangan kinerja"
                ],
                correctAnswer: 1,
                explanation: "Prinsip ini menekankan penempatan pegawai sesuai kompetensi (B). Pilihan lain seperti senioritas (A) atau rotasi (C) adalah kebijakan berbeda."
            },
            {
                question: "Dalam konteks pelayanan publik, 'one-stop service' bertujuan untuk...",
                options: [
                    "A. Memusatkan semua layanan di ibukota",
                    "B. Menyederhanakan prosedur administratif",
                    "C. Mengurangi jumlah pegawai negeri",
                    "D. Memprivatisasi layanan publik",
                    "E. Membentuk lembaga baru"
                ],
                correctAnswer: 1,
                explanation: "One-stop service bertujuan menyederhanakan prosedur (B). Pilihan lain seperti pemusatan (A) atau privatisasi (D) bukan tujuan utama konsep ini."
            },
            {
                question: "Menurut UU No. 25 Tahun 2009, pelayanan publik harus memenuhi standar...",
                options: [
                    "A. Kualitas, aksesibilitas, dan kesetaraan",
                    "B. Kecepatan, kemurahan, dan kesederhanaan",
                    "C. Akuntabilitas, transparansi, dan kondisional",
                    "D. Teknologi, inovasi, dan modernisasi",
                    "E. Kepatuhan, kedisiplinan, dan hierarki"
                ],
                correctAnswer: 0,
                explanation: "UU No. 25/2009 menyebut standar pelayanan mencakup kualitas, aksesibilitas, dan kesetaraan (A). Pilihan lain hanya sebagian benar atau tidak relevan."
            },
            {
                question: "Dalam sistem merit ASN, penilaian kinerja terutama didasarkan pada...",
                options: [
                    "A. Lama pengabdian dan senioritas",
                    "B. Prestasi kerja dan kompetensi",
                    "C. Loyalitas kepada atasan langsung",
                    "D. Partisipasi dalam kegiatan sosial",
                    "E. Latar belakang pendidikan"
                ],
                correctAnswer: 1,
                explanation: "Sistem merit menekankan prestasi kerja dan kompetensi (B). Pilihan lain seperti senioritas (A) bertentangan dengan prinsip meritokrasi."
            },
            {
                question: "Menurut UU No. 14 Tahun 2008 tentang Keterbukaan Informasi Publik, badan publik wajib membuka informasi kecuali...",
                options: [
                    "A. Informasi yang membahayakan negara",
                    "B. Informasi tentang anggaran lembaga",
                    "C. Informasi prosedur pelayanan publik",
                    "D. Informasi profil pejabat publik",
                    "E. Informasi statistik kependudukan"
                ],
                correctAnswer: 0,
                explanation: "Informasi yang dikecualikan adalah yang membahayakan negara (A). Pilihan lain adalah informasi yang wajib dibuka menurut UU tersebut."
            },
            {
                question: "Dalam konteks reformasi birokrasi, 'lean government' bertujuan untuk...",
                options: [
                    "A. Memperbanyak jumlah pegawai",
                    "B. Memperluas struktur organisasi",
                    "C. Menyederhanakan proses kerja",
                    "D. Membentuk unit-unit baru",
                    "E. Meningkatkan anggaran belanja"
                ],
                correctAnswer: 2,
                explanation: "Lean government fokus pada penyederhanaan proses (C). Pilihan lain seperti memperbanyak pegawai (A) bertentangan dengan konsep ini."
            },
            {
                question: "Menurut Perpres No. 54 Tahun 2018, tahapan pembangunan Zona Integritas menuju WBK/WBBM dimulai dengan...",
                options: [
                    "A. Evaluasi mandiri dan penyusunan rencana aksi",
                    "B. Pelatihan massal seluruh pegawai",
                    "C. Pembentukan tim khusus dari pusat",
                    "D. Pengadaan sarana prasarana baru",
                    "E. Penyusunan peraturan daerah"
                ],
                correctAnswer: 0,
                explanation: "Tahap awal adalah evaluasi mandiri dan rencana aksi (A). Pilihan lain seperti pelatihan massal (B) bukan tahap pertama dalam Perpres tersebut."
            },
            {
                question: "Dalam konteks pengawasan ASN, fungsi utama Inspektorat Jenderal adalah...",
                options: [
                    "A. Melakukan pengawasan intern pemerintah",
                    "B. Menyelesaikan sengketa administrasi",
                    "C. Mengevaluasi kinerja pejabat politik",
                    "D. Mengawasi pelaksanaan pemilu",
                    "E. Memeriksa laporan keuangan partai politik"
                ],
                correctAnswer: 0,
                explanation: "Itjen bertugas pengawasan intern pemerintah (A). Pilihan lain seperti sengketa administrasi (B) adalah tugas badan lain seperti PTUN."
            },
            {
                question: "Menurut Permenpan RB No. 38 Tahun 2017, kompetensi teknis ASN meliputi...",
                options: [
                    "A. Pengetahuan, keterampilan, dan sikap perilaku khusus",
                    "B. Kemampuan berbahasa asing dan teknologi",
                    "C. Pengalaman kerja di berbagai instansi",
                    "D. Kualifikasi pendidikan formal",
                    "E. Jaringan profesional di luar instansi"
                ],
                correctAnswer: 0,
                explanation: "Kompetensi teknis mencakup pengetahuan, keterampilan, dan sikap khusus (A). Pilihan lain seperti bahasa asing (B) hanya bagian kecil dari kompetensi."
            },
            {
                question: "Dalam sistem pengadaan barang/jasa pemerintah, prinsip 'efisien' berarti...",
                options: [
                    "A. Menggunakan anggaran seminimal mungkin",
                    "B. Memilih harga terendah tanpa pertimbangan kualitas",
                    "C. Mempercepat proses pengadaan tanpa prosedur",
                    "D. Melibatkan banyak penyedia barang/jasa",
                    "E. Mengutamakan produk dalam negeri"
                ],
                correctAnswer: 0,
                explanation: "Efisien berarti penggunaan anggaran optimal (A). Pilihan lain seperti harga terendah (B) bisa bertentangan dengan prinsip nilai uang."
            },
            {
                question: "Menurut UU No. 30 Tahun 2014, penyelenggara pemerintahan wajib menerapkan asas...",
                options: [
                    "A. Kepastian hukum, manfaat, dan keadilan",
                    "B. Kecepatan, ketepatan, dan kemurahan",
                    "C. Kesetaraan, keseragaman, dan kesederhanaan",
                    "D. Teknologi, modernisasi, dan inovasi",
                    "E. Hierarki, sentralisasi, dan otoritas"
                ],
                correctAnswer: 0,
                explanation: "UU No. 30/2014 menyebut asas kepastian hukum, manfaat, dan keadilan (A). Pilihan lain tidak sesuai dengan ketentuan UU tersebut."
            },
            {
                question: "Dalam konteks tata kelola pemerintahan, 'whole of government' bertujuan untuk...",
                options: [
                    "A. Menciptakan sinergi antar lembaga pemerintah",
                    "B. Memusatkan semua kewenangan di pemerintah pusat",
                    "C. Membentuk struktur organisasi yang besar",
                    "D. Mengurangi peran pemerintah daerah",
                    "E. Menyeragamkan kebijakan di semua sektor"
                ],
                correctAnswer: 0,
                explanation: "Konsep ini menekankan sinergi antar lembaga (A). Pilihan lain seperti pemusatan kewenangan (B) bertentangan dengan prinsip otonomi daerah."
            },
            {
                question: "Menurut Peraturan Pemerintah No. 17 Tahun 2020, perubahan Nomenklatur Kementerian harus memperhatikan...",
                options: [
                    "A. Efektivitas organisasi dan beban anggaran",
                    "B. Jumlah pegawai dan luas gedung perkantoran",
                    "C. Popularitas menteri yang menjabat",
                    "D. Ketersediaan sumber daya alam",
                    "E. Kebijakan partai politik"
                ],
                correctAnswer: 0,
                explanation: "PP No. 17/2020 menyebut perubahan nomenklatur harus pertimbangkan efektivitas dan anggaran (A). Pilihan lain tidak relevan dengan ketentuan tersebut."
            },
            {
                question: "Dalam sistem perencanaan pembangunan nasional, dokumen RPJMN disusun untuk periode...",
                options: [
                    "A. 1 tahun",
                    "B. 3 tahun",
                    "C. 5 tahun",
                    "D. 10 tahun",
                    "E. 20 tahun"
                ],
                correctAnswer: 2,
                explanation: "RPJMN (Rencana Pembangunan Jangka Menengah Nasional) disusun untuk 5 tahun (C). Pilihan lain merujuk pada dokumen perencanaan lain seperti RPJP (20 tahun)."
            },
            {
                question: "Menurut UU No. 23 Tahun 2014 tentang Pemerintahan Daerah, urusan pemerintahan absolut meliputi...",
                options: [
                    "A. Pendidikan dan kesehatan",
                    "B. Pertahanan dan keamanan",
                    "C. Pertanian dan perikanan",
                    "D. Perdagangan dan industri",
                    "E. Pariwisata dan kebudayaan"
                ],
                correctAnswer: 1,
                explanation: "Urusan absolut menurut UU No. 23/2014 adalah pertahanan, keamanan, agama, moneter, dan yustisi (B). Pilihan lain adalah urusan konkuren atau umum."
            },
            {
                question: "Dalam konteks pengelolaan keuangan daerah, 'silpa' (sisa lebih perhitungan anggaran) dapat digunakan untuk...",
                options: [
                    "A. Pembiayaan defisit anggaran tahun berikutnya",
                    "B. Bonus bagi pejabat daerah",
                    "C. Pembangunan rumah dinas pejabat",
                    "D. Bantuan sosial langsung",
                    "E. Pembiayaan partai politik"
                ],
                correctAnswer: 0,
                explanation: "Silpa dapat digunakan untuk pembiayaan defisit anggaran berikutnya (A). Pilihan lain seperti bonus (B) dilarang menurut peraturan keuangan daerah."
            },
            {
                question: "Menurut Permendagri No. 86 Tahun 2017, dokumen perencanaan pembangunan daerah yang memuat program prioritas adalah...",
                options: [
                    "A. RKPD",
                    "B. APBD",
                    "C. Perda",
                    "D. LKPJ",
                    "E. KUA-PPAS"
                ],
                correctAnswer: 0,
                explanation: "RKPD (Rencana Kerja Pemerintah Daerah) memuat program prioritas (A). Pilihan lain seperti APBD (B) adalah dokumen anggaran, bukan perencanaan."
            },
            {
                question: "Dalam sistem pemerintahan Indonesia, fungsi utama Ombudsman adalah...",
                options: [
                    "A. Mengawasi pelaksanaan pemilu",
                    "B. Menyelesaikan sengketa perdata",
                    "C. Menangani pengaduan maladministrasi",
                    "D. Memeriksa laporan keuangan negara",
                    "E. Mengevaluasi kinerja menteri"
                ],
                correctAnswer: 2,
                explanation: "Ombudsman berfungsi menangani maladministrasi (C). Pilihan lain adalah tugas lembaga lain seperti BPK (D) atau Bawaslu (A)."
            },
            {
                question: "Menurut UU No. 9 Tahun 2016 tentang Pencegahan dan Penanganan Krisis Sistem Keuangan, lembaga yang bertugas menetapkan status krisis adalah...",
                options: [
                    "A. Presiden setelah berkonsultasi dengan DPR",
                    "B. Menteri Keuangan bersama Gubernur BI",
                    "C. Komite Stabilitas Sistem Keuangan",
                    "D. Otoritas Jasa Keuangan",
                    "E. Mahkamah Agung"
                ],
                correctAnswer: 0,
                explanation: "Presiden yang menetapkan status krisis setelah konsultasi dengan DPR (A). Pilihan lain seperti KSSK (C) hanya memberikan rekomendasi."
            },
            {
                question: "Dalam konteks pelayanan publik, 'service recovery' bertujuan untuk...",
                options: [
                    "A. Mencegah terjadinya kegagalan layanan",
                    "B. Memperbaiki citra instansi setelah kegagalan layanan",
                    "C. Mengganti rugi pengguna layanan",
                    "D. Menghukum petugas yang lalai",
                    "E. Mengevaluasi standar pelayanan"
                ],
                correctAnswer: 1,
                explanation: "Service recovery fokus pada perbaikan citra setelah kegagalan (B). Pilihan lain seperti pencegahan (A) adalah tindakan berbeda."
            },
            {
                question: "Menurut UU No. 19 Tahun 2019 tentang KPK, tugas utama KPK adalah...",
                options: [
                    "A. Mengawasi seluruh pegawai negeri",
                    "B. Mencegah dan memberantas korupsi",
                    "C. Menyelidiki semua tindak pidana",
                    "D. Mengevaluasi kebijakan pemerintah",
                    "E. Memeriksa keuangan partai politik"
                ],
                correctAnswer: 1,
                explanation: "Tugas utama KPK adalah pencegahan dan pemberantasan korupsi (B). Pilihan lain seperti mengawasi semua pegawai (A) melampaui kewenangan KPK."
            },
            {
                question: "Dalam sistem pengawasan keuangan negara, pemeriksaan kinerja oleh BPK bertujuan menilai...",
                options: [
                    "A. Kesesuaian dengan peraturan perundangan",
                    "B. Ekonomi, efisiensi, dan efektivitas",
                    "C. Kepatuhan terhadap standar akuntansi",
                    "D. Akurasi laporan keuangan",
                    "E. Kecukupan bukti transaksi"
                ],
                correctAnswer: 1,
                explanation: "Pemeriksaan kinerja menilai 3E: ekonomi, efisiensi, efektivitas (B). Pilihan lain seperti kesesuaian peraturan (A) lebih relevan untuk pemeriksaan keuangan."
            },
            {
                question: "Menurut UU No. 12 Tahun 2011 tentang Pembentukan Peraturan Perundang-undangan, hierarki peraturan perundangan di bawah UUD 1945 adalah...",
                options: [
                    "A. UU/Perppu - PP - Perpres - Perda",
                    "B. Tap MPR - UU - Perda - Kepres",
                    "C. UU - PP - Permen - Keputusan Dirjen",
                    "D. Perppu - Perda Provinsi - Perda Kabupaten",
                    "E. Perpres - Permen - Peraturan Daerah"
                ],
                correctAnswer: 0,
                explanation: "Hierarki menurut UU No. 12/2011 adalah UU/Perppu - PP - Perpres - Perda (A). Pilihan lain tidak sesuai dengan ketentuan hierarki dalam UU tersebut."
            },
            {
                question: "Dalam konteks reformasi birokrasi, 'business process reengineering' bertujuan untuk...",
                options: [
                    "A. Memperbaiki proses kerja secara radikal",
                    "B. Menambah jumlah pegawai",
                    "C. Membentuk unit-unit baru",
                    "D. Meningkatkan anggaran operasional",
                    "E. Memperpanjang rantai birokrasi"
                ],
                correctAnswer: 0,
                explanation: "BPR fokus pada perbaikan radikal proses kerja (A). Pilihan lain seperti menambah pegawai (B) bertentangan dengan prinsip BPR."
            },
            {
                question: "Menurut UU No. 15 Tahun 2006 tentang BPK, laporan keuangan pemerintah yang diaudit harus memenuhi kriteria...",
                options: [
                    "A. Relevan, andal, dan dapat dibandingkan",
                    "B. Lengkap, akurat, dan tepat waktu",
                    "C. Rinci, transparan, dan mudah diakses",
                    "D. Sederhana, jelas, dan informatif",
                    "E. Komprehensif, detail, dan mutakhir"
                ],
                correctAnswer: 0,
                explanation: "Menurut UU BPK, laporan keuangan harus relevan, andal, dan dapat dibandingkan (A). Pilihan lain menggambarkan karakteristik yang lebih umum."
            },
            {
                question: "Dalam sistem pemerintahan daerah, 'asas tugas pembantuan' berarti...",
                options: [
                    "A. Penyerahan urusan pemerintah pusat ke daerah",
                    "B. Pelimpahan wewenang dari daerah ke desa",
                    "C. Pemerintah pusat menugaskan daerah untuk melaksanakan urusan pusat",
                    "D. Kerjasama antar daerah dalam penyelenggaraan urusan",
                    "E. Pembagian urusan antara provinsi dan kabupaten/kota"
                ],
                correctAnswer: 2,
                explanation: "Tugas pembantuan adalah penugasan dari pusat ke daerah untuk urusan pusat (C). Pilihan lain merujuk pada asas desentralisasi atau dekonsentrasi."
            },
            {
                question: "Menurut Perpres No. 16 Tahun 2018 tentang Pengadaan Barang/Jasa Pemerintah, nilai pengadaan yang mewajibkan pelelangan adalah...",
                options: [
                    "A. Di atas Rp200 juta",
                    "B. Di atas Rp2,5 miliar",
                    "C. Di atas Rp5 miliar",
                    "D. Di atas Rp10 miliar",
                    "E. Di atas Rp50 miliar"
                ],
                correctAnswer: 1,
                explanation: "Menurut Perpres No. 16/2018 (yang telah diubah), pelelangan wajib untuk pengadaan di atas Rp2,5 miliar (B). Pilihan lain tidak sesuai dengan ketentuan terbaru."
            },
            {
                question: "Dalam konteks kebijakan publik, 'stakeholder analysis' penting untuk...",
                options: [
                    "A. Mengidentifikasi pihak yang terkena dampak kebijakan",
                    "B. Menghitung anggaran yang dibutuhkan",
                    "C. Menentukan sasaran fisik program",
                    "D. Mengevaluasi kinerja pelaksana kebijakan",
                    "E. Membandingkan dengan kebijakan negara lain"
                ],
                correctAnswer: 0,
                explanation: "Analisis stakeholder mengidentifikasi pihak yang terdampak (A). Pilihan lain seperti anggaran (B) adalah aspek berbeda dari analisis kebijakan."
            },
            {
                question: "Menurut UU No. 2 Tahun 2018 tentang Perubahan atas UU MD3, hak angket DPR dilaksanakan untuk...",
                options: [
                    "A. Mengawasi pelaksanaan undang-undang",
                    "B. Menyelidiki kasus tertentu yang strategis",
                    "C. Mengevaluasi kinerja menteri",
                    "D. Memeriksa laporan keuangan pemerintah",
                    "E. Menilai kebijakan moneter"
                ],
                correctAnswer: 1,
                explanation: "Hak angket untuk menyelidiki kasus strategis (B). Pilihan lain seperti pengawasan UU (A) lebih terkait dengan hak pengawasan umum DPR."
            },
            {
                question: "Dalam sistem kepegawaian, 'job analysis' terutama digunakan untuk...",
                options: [
                    "A. Menentukan kebutuhan rekrutmen pegawai",
                    "B. Mengevaluasi kinerja individu pegawai",
                    "C. Menyusun struktur organisasi",
                    "D. Merancang sistem penggajian",
                    "E. Membuat pelatihan pegawai"
                ],
                correctAnswer: 0,
                explanation: "Analisis jabatan terutama untuk menentukan kebutuhan rekrutmen (A). Pilihan lain seperti evaluasi kinerja (B) menggunakan tools yang berbeda."
            },
            {
                question: "Menurut UU No. 31 Tahun 1999 jo UU No. 20 Tahun 2001 tentang Pemberantasan Tindak Pidana Korupsi, yang termasuk unsur tindak pidana korupsi adalah...",
                options: [
                    "A. Melawan hukum, memperkaya diri sendiri, merugikan keuangan negara",
                    "B. Melanggar peraturan, menyalahgunakan wewenang, tidak transparan",
                    "C. Tidak akuntabel, nepotisme, kolusi",
                    "D. Pelanggaran kode etik, konflik kepentingan, gratifikasi",
                    "E. Penyalahgunaan jabatan, mark up proyek, suap"
                ],
                correctAnswer: 0,
                explanation: "Unsur korupsi menurut UU adalah melawan hukum, memperkaya diri, merugikan keuangan negara (A). Pilihan lain menggambarkan bentuk atau modus korupsi."
            },
            {
                question: "Dalam konteks manajemen risiko pemerintahan, 'risk appetite' merujuk pada...",
                options: [
                    "A. Jumlah risiko yang dapat diterima organisasi",
                    "B. Daftar risiko potensial yang dihadapi",
                    "C. Strategi untuk menghindari semua risiko",
                    "D. Prosedur penanganan risiko",
                    "E. Dokumentasi kejadian risiko"
                ],
                correctAnswer: 0,
                explanation: "Risk appetite adalah tingkat risiko yang bisa diterima (A). Pilihan lain merujuk pada komponen lain dari manajemen risiko seperti identifikasi (B) atau mitigasi (D)."
            },
            {
                question: "Menurut Peraturan Pemerintah No. 53 Tahun 2010 tentang Disiplin PNS, hukuman disiplin tingkat sedang adalah...",
                options: [
                    "A. Teguran lisan",
                    "B. Teguran tertulis",
                    "C. Penundaan kenaikan gaji",
                    "D. Penurunan pangkat",
                    "E. Pemecatan"
                ],
                correctAnswer: 2,
                explanation: "Penundaan kenaikan gaji termasuk hukuman tingkat sedang (C). Pilihan A-B ringan, D-E berat menurut PP No. 53/2010."
            },
            {
                question: "Dalam sistem perencanaan nasional, 'cascading planning' berarti...",
                options: [
                    "A. Perencanaan dari tingkat pusat ke daerah",
                    "B. Penyusunan rencana oleh tim khusus",
                    "C. Perencanaan berbasis proyek",
                    "D. Penyusunan anggaran bottom-up",
                    "E. Perencanaan sektoral"
                ],
                correctAnswer: 0,
                explanation: "Cascading planning adalah perencanaan berjenjang dari pusat ke daerah (A). Pilihan lain seperti bottom-up (D) adalah pendekatan berbeda."
            },
            {
                question: "Menurut UU No. 14 Tahun 2008 tentang Keterbukaan Informasi Publik, batas waktu maksimal pemberian informasi oleh badan publik adalah...",
                options: [
                    "A. 7 hari kerja",
                    "B. 10 hari kerja",
                    "C. 14 hari kerja",
                    "D. 20 hari kerja",
                    "E. 30 hari kerja"
                ],
                correctAnswer: 1,
                explanation: "Batas waktu maksimal adalah 10 hari kerja (B) sesuai UU KIP. Pilihan lain tidak sesuai dengan ketentuan UU tersebut."
            },
            {
                question: "Dalam konteks e-government, 'interoperabilitas' terutama bertujuan untuk...",
                options: [
                    "A. Meningkatkan keamanan sistem",
                    "B. Memungkinkan integrasi sistem yang berbeda",
                    "C. Mempercepat pembangunan infrastruktur TI",
                    "D. Mengurangi biaya pengadaan software",
                    "E. Menstandarisasi perangkat keras"
                ],
                correctAnswer: 1,
                explanation: "Interoperabilitas memungkinkan integrasi sistem berbeda (B). Pilihan lain seperti keamanan (A) adalah aspek berbeda dari e-government."
            },
            {
                question: "Menurut Permendagri No. 90 Tahun 2019 tentang Klasifikasi, Kodefikasi, dan Nomenklatur Perencanaan Pembangunan, kode 1.01.01 merujuk pada...",
                options: [
                    "A. Urusan pemerintahan",
                    "B. Program pembangunan",
                    "C. Kegiatan pemerintah",
                    "D. Sub kegiatan",
                    "E. Output program"
                ],
                correctAnswer: 0,
                explanation: "Kode 1.01.01 merujuk pada urusan pemerintahan (A). Pilihan lain memiliki format kode yang berbeda dalam Permendagri tersebut."
            },
            {
                question: "Dalam sistem pengelolaan keuangan daerah, 'belanja tidak tersangka' adalah...",
                options: [
                    "A. Belanja yang tidak dianggarkan tetapi harus dibayar",
                    "B. Belanja untuk kegiatan mendadak",
                    "C. Belanja yang dianggarkan tetapi tidak digunakan",
                    "D. Belanja untuk bencana alam",
                    "E. Belanja tidak langsung"
                ],
                correctAnswer: 0,
                explanation: "Belanja tidak tersangka adalah belanja tak terduga yang tidak dianggarkan tetapi wajib dibayar (A). Pilihan lain tidak sesuai definisi peraturan keuangan daerah."
            },
            {
                question: "Menurut Peraturan Pemerintah No. 12 Tahun 2017 tentang Pembinaan dan Pengawasan Penyelenggaraan Pemerintahan Daerah, fungsi pembinaan mencakup...",
                options: [
                    "A. Pemberian pedoman, bimbingan, dan supervisi",
                    "B. Pemeriksaan, pengawasan, dan evaluasi",
                    "C. Penilaian, pengendalian, dan koreksi",
                    "D. Pelaporan, pemantauan, dan verifikasi",
                    "E. Sosialisasi, pelatihan, dan asistensi"
                ],
                correctAnswer: 0,
                explanation: "Fungsi pembinaan mencakup pedoman, bimbingan, dan supervisi (A). Pilihan lain lebih menggambarkan fungsi pengawasan."
            },
            {
                question: "Dalam konteks kebijakan publik, 'policy dilemma' terjadi ketika...",
                options: [
                    "A. Terjadi konflik antara tujuan kebijakan yang berbeda",
                    "B. Tidak ada data yang mendukung kebijakan",
                    "C. Anggaran tidak mencukupi untuk implementasi",
                    "D. Tidak ada kesepakatan politik tentang kebijakan",
                    "E. Implementasi kebijakan menemui resistensi"
                ],
                correctAnswer: 0,
                explanation: "Dilema kebijakan terjadi saat konflik antara tujuan berbeda (A). Pilihan lain menggambarkan masalah kebijakan lain seperti keterbatasan data (B) atau anggaran (C)."
            },
            {
                question: "Menurut UU No. 17 Tahun 2003 tentang Keuangan Negara, tahun anggaran berlangsung dari...",
                options: [
                    "A. 1 Januari sampai 31 Desember",
                    "B. 1 April sampai 31 Maret tahun berikutnya",
                    "C. 1 Juli sampai 30 Juni tahun berikutnya",
                    "D. 1 September sampai 31 Agustus tahun berikutnya",
                    "E. Sesuai ketetapan pemerintah setiap tahun"
                ],
                correctAnswer: 0,
                explanation: "Tahun anggaran adalah tahun kalender (1 Jan-31 Des) menurut UU No. 17/2003 (A). Pilihan lain adalah sistem anggaran negara lain."
            },
            {
                question: "Dalam sistem pengadaan barang/jasa pemerintah, 'swakelola' dapat dilakukan apabila...",
                options: [
                    "A. Pemerintah memiliki kompetensi dan sumber daya",
                    "B. Nilai pengadaan sangat besar",
                    "C. Barang/jasa sangat kompleks",
                    "D. Waktu pelaksanaan sangat singkat",
                    "E. Tidak ada penyedia yang berminat"
                ],
                correctAnswer: 0,
                explanation: "Swakelola dilakukan jika pemerintah memiliki kompetensi dan sumber daya (A). Pilihan lain seperti nilai besar (B) justru biasanya tidak cocok untuk swakelola."
            },
            {
                question: "Menurut Peraturan Pemerintah No. 45 Tahun 2013 tentang Tata Cara Pelaksanaan Anggaran Pendapatan dan Belanja Negara, DIPA (Daftar Isian Pelaksanaan Anggaran) disusun oleh...",
                options: [
                    "A. Kementerian Keuangan",
                    "B. Kementerian PPN/Bappenas",
                    "C. Kementerian/Lembaga pengguna anggaran",
                    "D. Sekretariat Kabinet",
                    "E. Badan Pemeriksa Keuangan"
                ],
                correctAnswer: 2,
                explanation: "DIPA disusun oleh K/L pengguna anggaran (C). Pilihan lain seperti Kemenkeu (A) bertugas menetapkan dan mengawasi DIPA."
            },
            {
                question: "Dalam konteks manajemen ASN, 'talent management' terutama bertujuan untuk...",
                options: [
                    "A. Mengidentifikasi dan mengembangkan pegawai potensial",
                    "B. Merotasi semua pegawai secara berkala",
                    "C. Menyeragamkan kompetensi pegawai",
                    "D. Mengevaluasi kinerja seluruh pegawai",
                    "E. Memenuhi kebutuhan pegawai jangka pendek"
                ],
                correctAnswer: 0,
                explanation: "Talent management fokus pada identifikasi dan pengembangan pegawai potensial (A). Pilihan lain seperti rotasi (B) adalah kegiatan berbeda dalam MSDM."
            },
            {
                question: "Menurut UU No. 25 Tahun 2009 tentang Pelayanan Publik, jenis pelayanan publik mencakup...",
                options: [
                    "A. Pelayanan administratif, barang, dan jasa",
                    "B. Pelayanan dasar, menengah, dan lanjutan",
                    "C. Pelayanan preventif, kuratif, dan rehabilitatif",
                    "D. Pelayanan primer, sekunder, dan tersier",
                    "E. Pelayanan umum, khusus, dan strategis"
                ],
                correctAnswer: 0,
                explanation: "Jenis pelayanan menurut UU No. 25/2009 adalah administratif, barang, dan jasa (A). Pilihan lain adalah klasifikasi berbeda yang tidak sesuai UU tersebut."
            },
   {
                question: "Menurut UU No. 30 Tahun 2014 tentang Administrasi Pemerintahan, keputusan administrasi yang mengandung cacat hukum dapat dibatalkan melalui...",
                options: [
                    "A. Mekanisme banding administratif",
                    "B. Gugatan di Pengadilan Tata Usaha Negara",
                    "C. Mediasi oleh Ombudsman",
                    "D. Evaluasi oleh Inspektorat Jenderal",
                    "E. Rekomendasi Komisi Aparatur Sipil Negara"
                ],
                correctAnswer: 1,
                explanation: "Keputusan bermasalah dibatalkan melalui PTUN (B). Mekanisme lain seperti banding (A) hanya untuk keputusan yang belum final."
            },
            {
                question: "Dalam doktrin hukum administrasi, 'freies Ermessen' berarti pemerintah memiliki...",
                options: [
                    "A. Kewenangan mutlak tanpa kontrol",
                    "B. Kebebasan bertindak dalam keadaan mendesak",
                    "C. Hak prerogatif di bidang politik",
                    "D. Kekebalan hukum dalam pelayanan publik",
                    "E. Wewenang menafsirkan undang-undang"
                ],
                correctAnswer: 1,
                explanation: "Freies Ermessen adalah kebebasan bertindak dalam keadaan mendesak (B), bukan kewenangan mutlak (A) atau prerogatif (C)."
            },
            {
                question: "Menurut UU No. 12 Tahun 2011 tentang Pembentukan Peraturan Perundang-undangan, naskah akademik diperlukan dalam penyusunan...",
                options: [
                    "A. Peraturan Presiden dan Peraturan Daerah",
                    "B. Undang-Undang dan Peraturan Pemerintah",
                    "C. Peraturan Menteri dan Peraturan Gubernur",
                    "D. Semua jenis peraturan kecuali Perda",
                    "E. Hanya untuk Rancangan Undang-Undang"
                ],
                correctAnswer: 1,
                explanation: "Naskah akademik wajib untuk UU dan PP (B). Untuk Perpres/Perda tidak selalu wajib sesuai Pasal 22 UU tersebut."
            },
            {
                question: "Dalam asas umum pemerintahan yang baik (AUPB), 'asas kecermatan' berarti...",
                options: [
                    "A. Pemerintah harus bekerja secara hati-hati dan teliti",
                    "B. Keputusan harus berdasarkan bukti yang cukup",
                    "C. Prosedur administrasi harus sederhana",
                    "D. Pelayanan harus diberikan secara cepat",
                    "E. Kebijakan harus mempertimbangkan semua pihak"
                ],
                correctAnswer: 0,
                explanation: "Asas kecermatan menekankan kehati-hatian dan ketelitian (A), berbeda dengan asas kepastian (B) atau kesederhanaan (C)."
            },
            {
                question: "Menurut UU No. 19 Tahun 2019 tentang KPK, penyidikan oleh KPK terhadap pejabat negara tertentu memerlukan...",
                options: [
                    "A. Persetujuan Presiden setelah rekomendasi DPR",
                    "B. Izin dari atasan langsung pejabat tersebut",
                    "C. Rekomendasi Dewan Pengawas KPK",
                    "D. Laporan awal dari Inspektorat Jenderal",
                    "E. Permintaan resmi dari Kejaksaan Agung"
                ],
                correctAnswer: 2,
                explanation: "Penyidikan pejabat tertentu perlu rekomendasi Dewan Pengawas KPK (C) sesuai Pasal 12A UU KPK."
            },
            {
                question: "Dalam hukum administrasi, 'detournement de pouvoir' terjadi ketika...",
                options: [
                    "A. Pejabat menggunakan wewenang untuk tujuan lain dari maksud UU",
                    "B. Prosedur administrasi tidak diikuti dengan benar",
                    "C. Keputusan dibuat tanpa pertimbangan fakta",
                    "D. Ada konflik kepentingan dalam pengambilan keputusan",
                    "E. Kewenangan didelegasikan tanpa dasar hukum"
                ],
                correctAnswer: 0,
                explanation: "Detournement de pouvoir adalah penyimpangan tujuan wewenang (A), berbeda dengan pelanggaran prosedur (B) atau konflik kepentingan (D)."
            },
            {
                question: "Menurut UU No. 14 Tahun 2008 tentang Keterbukaan Informasi Publik, informasi yang dikecualikan harus memenuhi kriteria...",
                options: [
                    "A. Membahayakan negara dan/atau kepentingan publik",
                    "B. Bersifat rahasia menurut instansi yang bersangkutan",
                    "C. Tidak tersedia dalam sistem dokumentasi resmi",
                    "D. Memerlukan persetujuan atasan untuk dibuka",
                    "E. Termasuk dalam rahasia jabatan"
                ],
                correctAnswer: 0,
                explanation: "Informasi dikecualikan hanya jika membahayakan negara/kepentingan publik (A). Pilihan lain tidak sesuai Pasal 17 UU KIP."
            },
            {
                question: "Dalam sistem peradilan administrasi, 'verweer' adalah...",
                options: [
                    "A. Hak tergugat untuk membela diri",
                    "B. Kewajiban penggugat membuktikan dalil",
                    "C. Upaya hukum banding terhadap putusan",
                    "D. Mediasi sebelum persidangan",
                    "E. Pemeriksaan pendahuluan oleh hakim"
                ],
                correctAnswer: 0,
                explanation: "Verweer adalah hak membela diri bagi tergugat (A), berbeda dengan pembuktian (B) atau upaya hukum (C)."
            },
            {
                question: "Menurut UU No. 23 Tahun 2014 tentang Pemerintahan Daerah, pembatalan Perda oleh pemerintah pusat harus didasarkan pada...",
                options: [
                    "A. Bertentangan dengan kepentingan umum",
                    "B. Tidak sesuai dengan Rencana Pembangunan Nasional",
                    "C. Bertentangan dengan peraturan yang lebih tinggi",
                    "D. Menimbulkan kerugian keuangan daerah",
                    "E. Tidak melalui konsultasi publik yang memadai"
                ],
                correctAnswer: 2,
                explanation: "Pembatalan Perda hanya jika bertentangan dengan peraturan lebih tinggi (C) sesuai Pasal 251 UU Pemda."
            },
            {
                question: "Dalam doktrin 'droit de suite', pemerintah dapat...",
                options: [
                    "A. Melakukan penyitaan tanpa putusan pengadilan",
                    "B. Menarik kembali keputusan yang cacat hukum",
                    "C. Mengawasi pelaksanaan putusan PTUN",
                    "D. Menerbitkan peraturan retroaktif",
                    "E. Membatalkan izin yang telah diberikan"
                ],
                correctAnswer: 1,
                explanation: "Droit de suite adalah hak menarik kembali keputusan cacat (B), bukan penyitaan (A) atau pengawasan (C)."

            },
            // Soal 61-70 (Kebijakan Fiskal dan APBN)
            {
                question: "Menurut UU No. 17 Tahun 2003 tentang Keuangan Negara, defisit APBN tidak boleh melebihi...",
                options: [
                    "A. 1% dari PDB",
                    "B. 2% dari PDB",
                    "C. 3% dari PDB",
                    "D. 4% dari PDB",
                    "E. 5% dari PDB"
                ],
                correctAnswer: 2,
                explanation: "Batas defisit APBN adalah 3% PDB (C) sesuai Pasal 12(3) UU tersebut, kecuali dalam keadaan darurat."
            },
            {
                question: "Dalam klasifikasi belanja negara, 'belanja tidak langsung' mencakup...",
                options: [
                    "A. Gaji pegawai dan tunjangan",
                    "B. Pembangunan infrastruktur",
                    "C. Bantuan sosial tunai",
                    "D. Subsidi bahan bakar minyak",
                    "E. Hibah kepada pemerintah daerah"
                ],
                correctAnswer: 0,
                explanation: "Belanja tidak langsung termasuk gaji dan tunjangan (A). Pilihan lain seperti infrastruktur (B) adalah belanja langsung."
            },
            {
                question: "Menurut PMK No. 190/PMK.05/2012, pagu indikatif dalam penyusunan RKA-K/L ditetapkan oleh...",
                options: [
                    "A. Kementerian PPN/Bappenas",
                    "B. Kementerian Keuangan",
                    "C. Kementerian PAN-RB",
                    "D. Sekretariat Kabinet",
                    "E. Kementerian/Lembaga bersangkutan"
                ],
                correctAnswer: 1,
                explanation: "Pagu indikatif ditetapkan Kemenkeu (B) sebagai dasar penyusunan RKA-K/L sebelum pembahasan dengan Bappenas."
            },
            {
                question: "Dalam sistem penganggaran berbasis kinerja, 'outcome' adalah...",
                options: [
                    "A. Barang/jasa yang dihasilkan program",
                    "B. Dampak program terhadap masyarakat",
                    "C. Proses pelaksanaan kegiatan",
                    "D. Penggunaan anggaran secara efisien",
                    "E. Capaian output fisik proyek"
                ],
                correctAnswer: 1,
                explanation: "Outcome mengacu pada dampak program (B), berbeda dengan output (A) atau proses (C)."
            },
            {
                question: "Menurut UU No. 1 Tahun 2004 tentang Perbendaharaan Negara, bendahara umum negara adalah...",
                options: [
                    "A. Menteri Keuangan",
                    "B. Dirjen Perbendaharaan",
                    "C. Gubernur Bank Indonesia",
                    "D. Kepala BKF Kemenkeu",
                    "E. Ketua BPK"
                ],
                correctAnswer: 0,
                explanation: "Menteri Keuangan sebagai bendahara umum negara (A) sesuai Pasal 6 UU tersebut."
            },
            {
                question: "Dalam konteks transfer ke daerah, 'dana insentif daerah' bertujuan untuk...",
                options: [
                    "A. Meningkatkan kinerja fiskal daerah",
                    "B. Menutup defisit APBD",
                    "C. Membiayai proyek strategis nasional",
                    "D. Mengganti pendapatan asli daerah",
                    "E. Membantu daerah tertinggal"
                ],
                correctAnswer: 0,
                explanation: "Dana insentif untuk peningkatan kinerja fiskal (A), bukan menutup defisit (B) atau membantu daerah tertinggal (E)."
            },
            {
                question: "Menurut Perpres No. 54 Tahun 2020 tentang Hibah, hibah kepada pemerintah asing harus mendapat persetujuan...",
                options: [
                    "A. DPR dan BPK",
                    "B. Menteri Keuangan dan Menteri Luar Negeri",
                    "C. Presiden setelah rekomendasi DPR",
                    "D. Dewan Moneter",
                    "E. Kementerian Koordinator Perekonomian"
                ],
                correctAnswer: 2,
                explanation: "Hibah ke pemerintah asing perlu persetujuan Presiden setelah rekomendasi DPR (C) sesuai Pasal 13 Perpres tersebut."
            },
            {
                question: "Dalam sistem akuntansi pemerintah, 'basis akrual' berarti transaksi dicatat saat...",
                options: [
                    "A. Dana dikeluarkan dari kas negara",
                    "B. Kewajiban pembayaran timbul",
                    "C. Dokumen pendukung lengkap",
                    "D. Barang/jasa diterima",
                    "E. Laporan triwulanan disusun"
                ],
                correctAnswer: 1,
                explanation: "Basis akrual mencatat transaksi saat kewajiban timbul (B), bukan saat kas keluar (A) atau barang diterima (D)."
            },
            {
                question: "Menurut UU No. 9 Tahun 2016 tentang Pencegahan Krisis Sistem Keuangan, KSSK terdiri dari...",
                options: [
                    "A. Menteri Keuangan, Gubernur BI, Ketua OJK, dan Ketua LPS",
                    "B. Presiden, Menko Perekonomian, dan Gubernur BI",
                    "C. Menteri Keuangan, Gubernur BI, dan Ketua BPK",
                    "D. Pimpinan DPR, Menkeu, dan Ketua KPK",
                    "E. Menko Polhukam, Menkeu, dan Kapolri"
                ],
                correctAnswer: 0,
                explanation: "KSSG terdiri dari Menkeu, Gubernur BI, Ketua OJK, dan Ketua LPS (A) sesuai Pasal 6 UU No. 9/2016."
            },
            {
                question: "Dalam konteks pinjaman daerah, 'capacity to pay' berarti...",
                options: [
                    "A. Kemampuan daerah membayar tanpa membebani APBD",
                    "B. Ketersediaan anggaran untuk pembayaran utang",
                    "C. Rasio utang terhadap PDRB yang aman",
                    "D. Kemampuan meningkatkan PAD untuk bayar utang",
                    "E. Kepatuhan terhadap batasan maksimal pinjaman"
                ],
                correctAnswer: 0,
                explanation: "Capacity to pay adalah kemampuan bayar tanpa membebani APBD (A), berbeda dengan rasio utang (C) atau ketersediaan anggaran (B)."

            },
            // Soal 71-80 (Etika Pemerintahan dan Reformasi Birokrasi)
            {
                question: "Menurut Permenpan RB No. 38 Tahun 2017, kompetensi sosial kultural ASN mencakup...",
                options: [
                    "A. Pelayanan publik dan kerja sama",
                    "B. Penguasaan teknologi informasi",
                    "C. Kemampuan analisis kebijakan",
                    "D. Pengawasan internal",
                    "E. Penyusunan peraturan"
                ],
                correctAnswer: 0,
                explanation: "Kompetensi sosial kultural meliputi pelayanan publik dan kerja sama (A), berbeda dengan teknis (B) atau manajerial (C)."
            },
            {
                question: "Dalam konteks pencegahan gratifikasi, 'nilai wajar' hadiah yang boleh diterima ASN adalah...",
                options: [
                    "A. Maksimal Rp1 juta",
                    "B. Tidak melebihi Rp2 juta",
                    "C. Tidak ada batasan asal dilaporkan",
                    "D. Sesuai dengan ketentuan instansi",
                    "E. Tidak ada nilai yang diperbolehkan"
                ],
                correctAnswer: 0,
                explanation: "Nilai wajar maksimal Rp1 juta (A) sesuai Peraturan KPK No. 2 Tahun 2019, asalkan tidak terkait jabatan."
            },
            {
                question: "Menurut PP No. 42 Tahun 2004 tentang Pembinaan Jiwa Korps PNS, 'esprit de corps' berarti...",
                options: [
                    "A. Kesetiaan pada atasan langsung",
                    "B. Kebanggaan sebagai bagian dari korps ASN",
                    "C. Kepatuhan mutlak pada hierarki",
                    "D. Solidaritas dengan rekan sejawat",
                    "E. Komitmen pada organisasi profesi"
                ],
                correctAnswer: 1,
                explanation: "Esprit de corps menekankan kebanggaan sebagai bagian korps ASN (B), bukan hanya solidaritas (D) atau kesetiaan (A)."
            },
            {
                question: "Dalam sistem merit, 'assessment center' digunakan untuk...",
                options: [
                    "A. Mengevaluasi kompetensi calon pejabat",
                    "B. Menilai kinerja tahunan pegawai",
                    "C. Mengukur produktivitas unit kerja",
                    "D. Memverifikasi dokumen administrasi",
                    "E. Menyelaraskan visi-misi organisasi"
                ],
                correctAnswer: 0,
                explanation: "Assessment center untuk evaluasi kompetensi calon pejabat (A), bukan penilaian kinerja (B) atau verifikasi dokumen (D)."
            },
            {
                question: "Menurut Permenpan RB No. 15 Tahun 2019 tentang Pedoman Penyusunan SOP, analisis risiko dalam penyusunan SOP bertujuan untuk...",
                options: [
                    "A. Mengidentifikasi kemungkinan kegagalan proses",
                    "B. Menghitung biaya pelaksanaan kegiatan",
                    "C. Menentukan sanksi bagi pelanggar",
                    "D. Mengevaluasi kompetensi pelaksana",
                    "E. Memetakan kebutuhan sumber daya"
                ],
                correctAnswer: 0,
                explanation: "Analisis risiko untuk identifikasi kemungkinan kegagalan (A), bukan perhitungan biaya (B) atau evaluasi kompetensi (D)."
            },
            {
                question: "Dalam konteks reformasi birokrasi, 'big fast results' merupakan pendekatan untuk...",
                options: [
                    "A. Mencapai perubahan signifikan dalam waktu singkat",
                    "B. Melakukan transformasi digital pemerintah",
                    "C. Memperluas cakupan pelayanan publik",
                    "D. Menyederhanakan struktur organisasi",
                    "E. Mengoptimalkan penggunaan anggaran"
                ],
                correctAnswer: 0,
                explanation: "Big fast results fokus pada perubahan signifikan cepat (A), berbeda dengan transformasi digital (B) atau penyederhanaan (D)."
            },
            {
                question: "Menurut Permendagri No. 100 Tahun 2022 tentang Pengelolaan Komplain Pelayanan Publik, waktu maksimal penanganan komplain adalah...",
                options: [
                    "A. 5 hari kerja",
                    "B. 10 hari kerja",
                    "C. 14 hari kerja",
                    "D. 20 hari kerja",
                    "E. 30 hari kerja"
                ],
                correctAnswer: 1,
                explanation: "Waktu maksimal penanganan komplain adalah 10 hari kerja (B) sesuai ketentuan Permendagri tersebut."
            },
            {
                question: "Dalam model perubahan birokrasi Lewin, tahap 'refreezing' berarti...",
                options: [
                    "A. Membekukan perubahan yang telah dilakukan",
                    "B. Menstabilkan pola perilaku baru",
                    "C. Mengevaluasi dampak perubahan",
                    "D. Menghentikan sementara proses reformasi",
                    "E. Memperkuat struktur organisasi lama"
                ],
                correctAnswer: 1,
                explanation: "Refreezing adalah stabilisasi perilaku baru (B), bukan pembekuan perubahan (A) atau evaluasi (C)."
            },
            {
                question: "Menurut Permenpan RB No. 11 Tahun 2015 tentang Roadmap Reformasi Birokrasi, tahapan RB meliputi...",
                options: [
                    "A. Persiapan, pelaksanaan, evaluasi",
                    "B. Perencanaan, implementasi, pemantapan",
                    "C. Inisiasi, akselerasi, konsolidasi",
                    "D. Penataan, penguatan, pemantapan",
                    "E. Pembenahan, transformasi, inovasi"
                ],
                correctAnswer: 1,
                explanation: "Tahapan RB adalah perencanaan, implementasi, pemantapan (B) sesuai ketentuan Permenpan RB tersebut."
            },
            {
                question: "Dalam konteks inovasi pelayanan publik, 'co-creation' berarti...",
                options: [
                    "A. Pelibatan masyarakat dalam merancang layanan",
                    "B. Kerjasama antar instansi pemerintah",
                    "C. Pembuatan aplikasi berbasis teknologi",
                    "D. Penyederhanaan prosedur administratif",
                    "E. Peningkatan kualitas sumber daya manusia"
                ],
                correctAnswer: 0,
                explanation: "Co-creation adalah pelibatan masyarakat dalam perancangan layanan (A), bukan sekadar kerjasama instansi (B) atau penyederhanaan (D)."

            },
            // Soal 81-100 (Studi Kasus Kompleks)
            {
                question: "Seorang pejabat menerima tiket pesawat dari mitra kerja untuk menghadiri seminar. Tindakan paling sesuai dengan Permenpan RB No. 25 Tahun 2021 adalah...",
                options: [
                    "A. Menerima setelah melaporkan ke atasan",
                    "B. Menolak karena termasuk gratifikasi",
                    "C. Menerima jika nilai di bawah Rp1 juta",
                    "D. Meminta diganti dengan honorarium",
                    "E. Menerima lalu menyumbangkannya"
                ],
                correctAnswer: 1,
                explanation: "Tiket dari mitra kerja termasuk gratifikasi yang harus ditolak (B), terlepas dari nilainya, karena berpotensi mempengaruhi objektivitas."
            },
            {
                question: "Jika suatu Perda Kabupaten bertentangan dengan Peraturan Menteri, tindakan Gubernur seharusnya...",
                options: [
                    "A. Membatalkan karena Perda lebih rendah dari Permen",
                    "B. Mengajukan judicial review ke MA",
                    "C. Meminta pembatalan kepada Presiden",
                    "D. Menyuruh Bupati merevisi Perda",
                    "E. Tidak melakukan apa-apa karena setara"
                ],
                correctAnswer: 2,
                explanation: "Gubernur harus meminta pembatalan ke Presiden (C) sesuai Pasal 251 UU No. 23/2014, karena Permen lebih tinggi dari Perda."
            },
            {
                question: "Ketika terjadi kebocoran data penduduk di instansi Anda, langkah pertama sesuai UU PDP adalah...",
                options: [
                    "A. Melaporkan ke BSSN dalam 3x24 jam",
                    "B. Memperbaiki sistem keamanan TI",
                    "C. Memberitahu publik melalui media",
                    "D. Menyiapkan tim investigasi internal",
                    "E. Melaporkan ke Komisi Informasi"
                ],
                correctAnswer: 0,
                explanation: "Langkah pertama adalah lapor ke BSSN dalam 3x24 jam (A) sesuai Pasal 46 UU No. 27 Tahun 2022 tentang PDP."
            },
            {
                question: "Jika pegawai melakukan pelanggaran disiplin sedang tetapi memiliki prestasi luar biasa, sanksi yang tepat adalah...",
                options: [
                    "A. Tetap diberikan sanksi sesuai aturan",
                    "B. Sanksi diperberat karena melanggar integritas",
                    "C. Sanksi diperingan karena prestasi",
                    "D. Diberikan pembinaan tanpa sanksi",
                    "E. Ditunda sanksinya selama 1 tahun"
                ],
                correctAnswer: 0,
                explanation: "Sanksi harus tetap diberikan (A) sesuai asas kepastian hukum dalam PP No. 53/2010, prestasi tidak menghapus pelanggaran."
            },
            {
                question: "Ketika terjadi konflik antara Permen dengan Perpres di bidang yang sama, yang berlaku adalah...",
                options: [
                    "A. Perpres karena lebih tinggi hierarkinya",
                    "B. Permen karena lebih teknis",
                    "C. Peraturan yang lebih baru",
                    "D. Harus ada harmonisasi oleh Menkumham",
                    "E. Ditentukan oleh Mahkamah Agung"
                ],
                correctAnswer: 0,
                explanation: "Perpres lebih tinggi dari Permen menurut hierarki UU No. 12/2011 (A), terlepas dari aspek teknis atau waktu penerbitan."
            },
            {
                question: "Jika ditemukan indikasi korupsi dalam proyek DAK, langkah pertama Inspektorat adalah...",
                options: [
                    "A. Melaporkan ke penegak hukum",
                    "B. Melakukan audit investigatif",
                    "C. Memeriksa dokumen pengadaan",
                    "D. Memanggil pihak terkait klarifikasi",
                    "E. Membentuk tim khusus dengan KPK"
                ],
                correctAnswer: 2,
                explanation: "Langkah pertama adalah pemeriksaan dokumen (C) untuk mengumpulkan bukti awal sebelum audit atau pelaporan."
            },
            {
                question: "Ketika pemerintah daerah tidak melaksanakan urusan wajib yang menjadi kewenangannya, sanksi dari pusat adalah...",
                options: [
                    "A. Pembatalan Perda terkait",
                    "B. Penundaan transfer dana DAU",
                    "C. Pemberhentian sementara kepala daerah",
                    "D. Pengalihan urusan ke pemerintah pusat",
                    "E. Pemberian teguran tertulis"
                ],
                correctAnswer: 1,
                explanation: "Sanksi berupa penundaan DAU (B) sesuai Pasal 288 UU No. 23/2014, sebelum sanksi lebih berat seperti pembatalan (A)."
            },
            {
                question: "Jika pejabat menandatangani kontrak pengadaan sebelum DIPA disahkan, konsekuensi hukumnya adalah...",
                options: [
                    "A. Kontrak tetap sah dengan persetujuan Kemenkeu",
                    "B. Kontrak batal demi hukum",
                    "C. Pejabat dapat dikenai sanksi administratif",
                    "D. Kontrak sah jika telah ada pagu indikatif",
                    "E. Perlu ratifikasi oleh DPRD"
                ],
                correctAnswer: 1,
                explanation: "Kontrak sebelum DIPA disahkan batal demi hukum (B) sesuai Pasal 35 UU No. 1/2004 tentang Perbendaharaan Negara."
            },
            {
                question: "Dalam penyusunan PERPPU menjadi UU, DPR harus...",
                options: [
                    "A. Mengesahkan dalam 30 hari sejak diajukan",
                    "B. Membahas dalam masa sidang berikutnya",
                    "C. Membentuk panitia khusus dalam 7 hari",
                    "D. Mengadakan rapat paripurna khusus",
                    "E. Meminta pendapat Mahkamah Konstitusi"
                ],
                correctAnswer: 1,
                explanation: "DPR wajib bahas PERPPU pada masa sidang berikutnya (B) sesuai Pasal 22 ayat (2) UUD 1945, tanpa batasan waktu spesifik."
            },
            {
                question: "Jika pegawai menolak mutasi dengan alasan tidak sesuai kompetensi, instansi seharusnya...",
                options: [
                    "A. Memaksakan mutasi sebagai perintah atasan",
                    "B. Mengevaluasi kesesuaian kompetensi",
                    "C. Memberikan sanksi pelanggaran disiplin",
                    "D. Meminta pegawai mengajukan pensiun",
                    "E. Membentuk tim mediasi konflik"
                ],
                correctAnswer: 1,
                explanation: "Instansi harus evaluasi kesesuaian kompetensi (B) sesuai prinsip 'the right man on the right place' dalam manajemen ASN."
            },
            {
                question: "Ketika terjadi bencana alam, APBD dapat diubah melalui...",
                options: [
                    "A. Pergub penetapan perubahan APBD",
                    "B. Perda perubahan APBD yang disederhanakan",
                    "C. Surat edaran gubernur/bupati",
                    "D. Keputusan DPRD dalam rapat khusus",
                    "E. Peraturan bersama DPRD dan kepala daerah"
                ],
                correctAnswer: 1,
                explanation: "Perubahan APBD melalui Perda yang disederhanakan (B) sesuai Pasal 279 UU No. 23/2014 tentang Pemerintahan Daerah."
            },
            {
                question: "Jika pejabat mengeluarkan kebijakan tanpa dasar hukum yang jelas, upaya hukum yang tersedia adalah...",
                options: [
                    "A. Gugatan di PTUN oleh pihak yang dirugikan",
                    "B. Laporan ke Ombudsman atas maladministrasi",
                    "C. Permohonan judicial review ke MA",
                    "D. Pelaporan ke KPK sebagai penyalahgunaan wewenang",
                    "E. Pengaduan ke Komisi Aparatur Sipil Negara"
                ],
                correctAnswer: 0,
                explanation: "Kebijakan tanpa dasar hukum dapat digugat di PTUN (A) oleh pihak yang dirugikan, sebagai upaya hukum yang tepat."
            },
            {
                question: "Dalam hal terjadi kekosongan jabatan pimpinan K/L, pelaksana tugas ditetapkan oleh...",
                options: [
                    "A. Presiden atas usul menteri terkait",
                    "B. Menteri PAN-RB setelah seleksi terbuka",
                    "C. Pejabat tinggi madya di lingkungan instansi",
                    "D. Sekretaris Jenderal sebagai otomatis plt",
                    "E. Tim seleksi independen yang dibentuk presiden"
                ],
                correctAnswer: 0,
                explanation: "Plt ditetapkan Presiden atas usul menteri (A) sesuai Perpres No. 82 Tahun 2020 tentang Kementerian Negara."
            },
            {
                question: "Jika Perda Provinsi dan Perda Kabupaten saling bertentangan, penyelesaiannya melalui...",
                options: [
                    "A. Harmonisasi oleh Kementerian Dalam Negeri",
                    "B. Pembatalan oleh Mahkamah Agung",
                    "C. Mediasi oleh Gubernur sebagai wakil pusat",
                    "D. Revisi oleh DPRD masing-masing",
                    "E. Keputusan bersama kepala daerah terkait"
                ],
                correctAnswer: 2,
                explanation: "Gubernur sebagai wakil pusat melakukan mediasi (C) sesuai Pasal 251 ayat (3) UU No. 23/2014 sebelum pembatalan."
            },
            {
                question: "Ketika terjadi pemutusan hubungan kerja sepihak oleh instansi pemerintah, pegawai dapat mengajukan...",
                options: [
                    "A. Gugatan ke Pengadilan Hubungan Industrial",
                    "B. Banding ke Komisi Kepegawaian Negara",
                    "C. Keberatan ke Badan Pertimbangan Kepegawaian",
                    "D. Laporan ke Ombudsman Republik Indonesia",
                    "E. Permohonan mediasi ke Kementerian PAN-RB"
                ],
                correctAnswer: 2,
                explanation: "Pegawai dapat ajukan keberatan ke BPK (C) sesuai Pasal 36 PP No. 11/2017 tentang Manajemen PNS sebelum upaya hukum lain."
            },
            {
                question: "Dalam hal pembentukan UU inisiatif DPR, tahapan pertama adalah...",
                options: [
                    "A. Penyusunan naskah akademik",
                    "B. Pengajuan rancangan undang-undang",
                    "C. Pembahasan dalam rapat komisi",
                    "D. Pengambilan keputusan dalam rapat paripurna",
                    "E. Sosialisasi ke masyarakat"
                ],
                correctAnswer: 1,
                explanation: "Tahap pertama adalah pengajuan RUU (B) ke DPR sesuai Pasal 21 UUD 1945, naskah akademik bisa menyusul."
            },
            {
                question: "Jika ditemukan potensi kerugian negara dalam laporan BPK, langkah wajib pemerintah adalah...",
                options: [
                    "A. Melaporkan ke penegak hukum dalam 30 hari",
                    "B. Membentuk tim pencari fakta independen",
                    "C. Melakukan pemeriksaan internal",
                    "D. Menyelesaikan tuntutan ganti rugi",
                    "E. Memperbaiki sistem pengendalian intern"
                ],
                correctAnswer: 3,
                explanation: "Pemerintah wajib selesaikan tuntutan ganti rugi (D) sesuai Pasal 8 ayat (3) UU No. 15/2006 tentang BPK sebelum langkah lain."
            },
            {
                question: "Dalam penyusunan Perpres, konsultasi publik dilakukan pada tahap...",
                options: [
                    "A. Penyusunan rancangan awal",
                    "B. Pembahasan antar kementerian",
                    "C. Review oleh Kementerian Hukum dan HAM",
                    "D. Pengesahan oleh Presiden",
                    "E. Evaluasi pasca penetapan"
                ],
                correctAnswer: 0,
                explanation: "Konsultasi publik pada tahap penyusunan rancangan awal (A) sesuai Pasal 53 UU No. 12/2011 tentang Pembentukan Peraturan Perundang-undangan."
            }
                    ]
                };
                
                saveQuestionsToStorage(initialQuestions);
            }
        }
        
        // Enhanced storage functions with fallback to sessionStorage if localStorage fails
        function loadQuestionsFromStorage() {
            try {
                const storedQuestions = localStorage.getItem('pergunusmart_question_bank');
                if (storedQuestions) {
                    return JSON.parse(storedQuestions);
                }
            } catch (e) {
                console.error('Error loading questions from localStorage:', e);
                // Try sessionStorage as fallback
                try {
                    const storedQuestions = sessionStorage.getItem('pergunusmart_question_bank');
                    if (storedQuestions) {
                        return JSON.parse(storedQuestions);
                    }
                } catch (e2) {
                    console.error('Error loading questions from sessionStorage:', e2);
                }
            }
            return null;
        }
        
        function saveQuestionsToStorage(questions) {
            try {
                localStorage.setItem('pergunusmart_question_bank', JSON.stringify(questions));
                // Also save to sessionStorage as backup
                sessionStorage.setItem('pergunusmart_question_bank', JSON.stringify(questions));
                return true;
            } catch (e) {
                console.error('Error saving questions to localStorage:', e);
                // Try sessionStorage as fallback
                try {
                    sessionStorage.setItem('pergunusmart_question_bank', JSON.stringify(questions));
                    return true;
                } catch (e2) {
                    console.error('Failed to save questions to sessionStorage:', e2);
                    alert('Gagal menyimpan soal. Penyimpanan lokal penuh. Silakan hubungi admin.');
                    return false;
                }
            }
        }
        
        function loadParticipantsFromStorage() {
            try {
                const storedParticipants = localStorage.getItem('pergunusmart_participants');
                if (storedParticipants) {
                    return JSON.parse(storedParticipants);
                }
            } catch (e) {
                console.error('Error loading participants from localStorage:', e);
                // Try sessionStorage as fallback
                try {
                    const storedParticipants = sessionStorage.getItem('pergunusmart_participants');
                    if (storedParticipants) {
                        return JSON.parse(storedParticipants);
                    }
                } catch (e2) {
                    console.error('Error loading participants from sessionStorage:', e2);
                }
            }
            return [];
        }
        
        function saveParticipantsToStorage(participants) {
            try {
                localStorage.setItem('pergunusmart_participants', JSON.stringify(participants));
                // Also save to sessionStorage as backup
                sessionStorage.setItem('pergunusmart_participants', JSON.stringify(participants));
                return true;
            } catch (e) {
                console.error('Error saving participants to localStorage:', e);
                // Try sessionStorage as fallback
                try {
                    sessionStorage.setItem('pergunusmart_participants', JSON.stringify(participants));
                    return true;
                } catch (e2) {
                    console.error('Failed to save participants to sessionStorage:', e2);
                    alert('Gagal menyimpan data peserta. Penyimpanan lokal penuh. Silakan hubungi admin.');
                    return false;
                }
            }
        }
        
        function loadAdminSettingsFromStorage() {
            try {
                const storedSettings = localStorage.getItem('pergunusmart_admin_settings');
                if (storedSettings) {
                    return JSON.parse(storedSettings);
                }
            } catch (e) {
                console.error('Error loading admin settings from localStorage:', e);
                // Try sessionStorage as fallback
                try {
                    const storedSettings = sessionStorage.getItem('pergunusmart_admin_settings');
                    if (storedSettings) {
                        return JSON.parse(storedSettings);
                    }
                } catch (e2) {
                    console.error('Error loading admin settings from sessionStorage:', e2);
                }
            }
            return null;
        }
        
        function saveAdminSettingsToStorage(settings) {
            try {
                localStorage.setItem('pergunusmart_admin_settings', JSON.stringify(settings));
                // Also save to sessionStorage as backup
                sessionStorage.setItem('pergunusmart_admin_settings', JSON.stringify(settings));
                return true;
            } catch (e) {
                console.error('Error saving admin settings to localStorage:', e);
                // Try sessionStorage as fallback
                try {
                    sessionStorage.setItem('pergunusmart_admin_settings', JSON.stringify(settings));
                    return true;
                } catch (e2) {
                    console.error('Failed to save settings to sessionStorage:', e2);
                    alert('Gagal menyimpan pengaturan. Penyimpanan lokal penuh. Silakan hubungi admin.');
                    return false;
                }
            }
        }
        
        // Get questions from storage
        function getQuestionsFromStorage() {
            const storedQuestions = loadQuestionsFromStorage();
            return storedQuestions || {
                'TES_IQ': [],
                'CPNS_P3K': []
            };
        }
        
        // Motivational messages based on score
        const MOTIVATIONAL_MESSAGES = {
            '90-100': 'Sempurna! Anda sangat luar biasa dalam menguasai materi ini. Pertahankan prestasi ini.',
            '80-89': 'Hasil yang sangat baik! Anda telah menunjukkan pemahaman yang mendalam tentang materi.',
            '70-79': 'Kerja bagus! Anda memiliki pemahaman yang baik tentang materi ini.',
            '60-69': 'Hasil yang cukup baik. Tingkatkan lagi pemahaman Anda untuk hasil yang lebih baik.',
            '50-59': 'Anda sudah memahami dasar-dasarnya. Terus berlatih untuk meningkatkan pemahaman.',
            '0-49': 'Jangan menyerah! Gunakan hasil ini sebagai motivasi untuk belajar lebih giat lagi.'
        };
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Load data from storage
            const loadedAdminSettings = loadAdminSettingsFromStorage();
            if (loadedAdminSettings) {
                adminSettings = loadedAdminSettings;
            }
            
            participantsData = loadParticipantsFromStorage();
            
            // Initialize question bank if not exists
            initializeQuestionBank();
            
            // Initialize particles.js for background
            particlesJS('particles-js', {
                "particles": {
                    "number": {
                        "value": 80,
                        "density": {
                            "enable": true,
                            "value_area": 800
                        }
                    },
                    "color": {
                        "value": "#ffffff"
                    },
                    "shape": {
                        "type": "circle",
                        "stroke": {
                            "width": 0,
                            "color": "#000000"
                        },
                        "polygon": {
                            "nb_sides": 5
                        }
                    },
                    "opacity": {
                        "value": 0.5,
                        "random": false,
                        "anim": {
                            "enable": false,
                            "speed": 1,
                            "opacity_min": 0.1,
                            "sync": false
                        }
                    },
                    "size": {
                        "value": 3,
                        "random": true,
                        "anim": {
                            "enable": false,
                            "speed": 40,
                            "size_min": 0.1,
                            "sync": false
                        }
                    },
                    "line_linked": {
                        "enable": true,
                        "distance": 150,
                        "color": "#ffffff",
                        "opacity": 0.4,
                        "width": 1
                    },
                    "move": {
                        "enable": true,
                        "speed": 2,
                        "direction": "none",
                        "random": false,
                        "straight": false,
                        "out_mode": "out",
                        "bounce": false,
                        "attract": {
                            "enable": false,
                            "rotateX": 600,
                            "rotateY": 1200
                        }
                    }
                },
                "interactivity": {
                    "detect_on": "canvas",
                    "events": {
                        "onhover": {
                            "enable": true,
                            "mode": "grab"
                        },
                        "onclick": {
                            "enable": true,
                            "mode": "push"
                        },
                        "resize": true
                    },
                    "modes": {
                        "grab": {
                            "distance": 140,
                            "line_linked": {
                                "opacity": 1
                            }
                        },
                        "bubble": {
                            "distance": 400,
                            "size": 40,
                            "duration": 2,
                            "opacity": 8,
                            "speed": 3
                        },
                        "repulse": {
                            "distance": 200,
                            "duration": 0.4
                        },
                        "push": {
                            "particles_nb": 4
                        },
                        "remove": {
                            "particles_nb": 2
                        }
                    }
                },
                "retina_detect": true
            });
            
            // Initialize celebration particles (hidden by default)
            particlesJS('celebration-particles', {
                "particles": {
                    "number": {
                        "value": 150,
                        "density": {
                            "enable": true,
                            "value_area": 800
                        }
                    },
                    "color": {
                        "value": ["#FF6B35", "#FFA630", "#EF8A17", "#FF9E4F", "#D45B00", "#FF8C42"]
                    },
                    "shape": {
                        "type": ["circle", "triangle", "star"],
                        "stroke": {
                            "width": 0,
                            "color": "#000000"
                        },
                        "polygon": {
                            "nb_sides": 5
                        }
                    },
                    "opacity": {
                        "value": 0.7,
                        "random": true,
                        "anim": {
                            "enable": true,
                            "speed": 1,
                            "opacity_min": 0.1,
                            "sync": false
                        }
                    },
                    "size": {
                        "value": 5,
                        "random": true,
                        "anim": {
                            "enable": true,
                            "speed": 4,
                            "size_min": 0.3,
                            "sync": false
                        }
                    },
                    "line_linked": {
                        "enable": false
                    },
                    "move": {
                        "enable": true,
                        "speed": 6,
                        "direction": "none",
                        "random": true,
                        "straight": false,
                        "out_mode": "out",
                        "bounce": false,
                        "attract": {
                            "enable": false,
                            "rotateX": 600,
                            "rotateY": 1200
                        }
                    }
                },
                "interactivity": {
                    "detect_on": "canvas",
                    "events": {
                        "onhover": {
                            "enable": false
                        },
                        "onclick": {
                            "enable": false
                        },
                        "resize": true
                    }
                },
                "retina_detect": true
            });
            
            // Load admin settings
            loadAdminSettings();
            
            // Event listeners for all buttons to play click sound
            document.querySelectorAll('button').forEach(button => {
                button.addEventListener('click', function() {
                    playButtonClickSound();
                });
            });
            
            // Main event listeners
            document.getElementById('login-btn').addEventListener('click', handleLogin);
            document.getElementById('agree-terms').addEventListener('change', toggleContinueButton);
            document.getElementById('continue-btn').addEventListener('click', showParticipantForm);
            
            // Purpose radio buttons
            document.querySelectorAll('input[name="purpose"]').forEach(radio => {
                radio.addEventListener('change', toggleCPNSLicenseSection);
            });
            
            document.getElementById('get-location-btn').addEventListener('click', getLocation);
            document.getElementById('save-participant-btn').addEventListener('click', startExam);
            document.getElementById('finish-exam-btn').addEventListener('click', finishExam);
            document.getElementById('skip-question-btn').addEventListener('click', skipQuestion);
            document.getElementById('unanswered-btn').addEventListener('click', showUnansweredQuestions);
            document.getElementById('print-certificate-btn').addEventListener('click', printCertificate);
            document.getElementById('retake-exam-btn').addEventListener('click', retakeExam);
            
            // Floating buttons
            document.getElementById('whatsapp-btn').addEventListener('click', contactAdmin);
            document.getElementById('question-bank-btn').addEventListener('click', showQuestionBankModal);
            document.getElementById('admin-panel-btn').addEventListener('click', showAdminPanelModal);
            
            // Modal close buttons
            document.getElementById('close-question-bank-modal').addEventListener('click', hideQuestionBankModal);
            document.getElementById('close-admin-panel-modal').addEventListener('click', hideAdminPanelModal);
            document.getElementById('close-edit-question-modal').addEventListener('click', hideEditQuestionModal);
            document.getElementById('close-view-question-modal').addEventListener('click', hideViewQuestionModal);
            document.getElementById('close-edit-participant-modal').addEventListener('click', hideEditParticipantModal);
            
            // Modal submit buttons
            document.getElementById('submit-question-bank-code').addEventListener('click', submitQuestionBankCode);
            document.getElementById('submit-admin-panel-code').addEventListener('click', submitAdminPanelCode);
            
            // Check form validity when fields change
            document.getElementById('fullname').addEventListener('input', checkParticipantFormValidity);
            document.getElementById('address').addEventListener('input', checkParticipantFormValidity);
            document.getElementById('phone').addEventListener('input', checkParticipantFormValidity);
            document.getElementById('email').addEventListener('input', checkParticipantFormValidity);
            document.getElementById('cpns-license').addEventListener('input', checkParticipantFormValidity);

            // Admin panel toggle switches
            document.querySelectorAll('.toggle-switch input').forEach(toggle => {
                toggle.addEventListener('change', function() {
                    const statusElement = document.getElementById(`${this.id}-status`);
                    statusElement.textContent = this.checked ? 'Aktif' : 'Nonaktif';
                });
            });

            // Question bank buttons
            document.getElementById('add-question-btn').addEventListener('click', addQuestionToBank);
            document.getElementById('filter-category').addEventListener('change', filterQuestions);
            
            // Edit question modal buttons
            document.getElementById('save-edit-question-btn').addEventListener('click', saveEditedQuestion);
            document.getElementById('delete-question-btn').addEventListener('click', deleteQuestion);
            
            // Admin panel buttons
            document.getElementById('save-codes-btn').addEventListener('click', saveCodes);
            document.getElementById('save-content-btn').addEventListener('click', saveContent);
            document.getElementById('save-settings-btn').addEventListener('click', saveSettings);
            
            // Participant selection and bulk actions
            document.getElementById('select-all-participants').addEventListener('change', toggleSelectAllParticipants);
            document.getElementById('select-all-header').addEventListener('change', toggleSelectAllParticipantsHeader);
            document.getElementById('edit-selected-btn').addEventListener('click', editSelectedParticipants);
            document.getElementById('delete-selected-btn').addEventListener('click', deleteSelectedParticipants);
            
            // Edit participant modal buttons
            document.getElementById('save-edit-participant-btn').addEventListener('click', saveEditedParticipant);
            document.getElementById('cancel-edit-participant-btn').addEventListener('click', hideEditParticipantModal);
            
            // Certificate validation
            document.getElementById('validate-certificate-btn').addEventListener('click', validateCertificate);
            
            // Participant search functionality
            document.getElementById('participant-search').addEventListener('input', searchParticipants);
            
            // Load participants data for admin panel
            loadParticipantsData();
        });

        // Function to play button click sound
        function playButtonClickSound() {
            // Mute other sounds when playing button click
            audioOpening.muted = true;
            audioCorrect.muted = true;
            audioWrong.muted = true;
            audioApplause.muted = true;
            
            audioButtonClick.currentTime = 0;
            audioButtonClick.muted = false;
            audioButtonClick.play().catch(e => console.log("Button click sound prevented:", e));
            
            // Unmute other sounds after button click plays
            setTimeout(() => {
                audioOpening.muted = false;
                audioCorrect.muted = false;
                audioWrong.muted = false;
                audioApplause.muted = false;
            }, 500);
        }

        // Function to validate name input (letters only)
        function validateNameInput(input) {
            // Remove any numbers or special characters
            input.value = input.value.replace(/[^a-zA-Z\s]/g, '');
            
            // Convert to uppercase
            input.value = input.value.toUpperCase();
            
            // Update form validity
            checkParticipantFormValidity();
        }

        // Function to validate phone input (numbers only)
        function validatePhoneInput(input) {
            // Remove any non-numeric characters
            input.value = input.value.replace(/\D/g, '');
            
            // Update form validity
            checkParticipantFormValidity();
        }
        
        // Load admin settings into the form
        function loadAdminSettings() {
            document.getElementById('greeting-text').textContent = adminSettings.greetingMessage;
            document.getElementById('admin-message').textContent = adminSettings.adminMessage;
            
            // Set admin panel form values
            document.getElementById('new-login-code').value = adminSettings.loginCode;
            document.getElementById('new-question-bank-code').value = adminSettings.questionBankCode;
            document.getElementById('new-cpns-code').value = adminSettings.cpnsLicenseCode;
            document.getElementById('new-admin-code').value = adminSettings.adminPanelCode;
            
            document.getElementById('exam-duration').value = adminSettings.examDuration;
            document.getElementById('question-count').value = adminSettings.questionCount;
            document.getElementById('randomize-questions').checked = adminSettings.randomizeQuestions;
            document.getElementById('randomize-status').textContent = adminSettings.randomizeQuestions ? 'Aktif' : 'Nonaktif';
            
            document.getElementById('greeting-message-input').value = adminSettings.greetingMessage;
            document.getElementById('admin-message-input').value = adminSettings.adminMessage;
            document.getElementById('chairman-name').value = adminSettings.chairmanName;
            document.getElementById('motivation-message-input').value = adminSettings.motivationMessage;
            
            document.getElementById('toggle-iq').checked = adminSettings.iqEnabled;
            document.getElementById('iq-status').textContent = adminSettings.iqEnabled ? 'Aktif' : 'Nonaktif';
            
            document.getElementById('toggle-cpns').checked = adminSettings.cpnsEnabled;
            document.getElementById('cpns-status').textContent = adminSettings.cpnsEnabled ? 'Aktif' : 'Nonaktif';
        }
        
        // Save admin settings to storage with enhanced storage mechanism
        function saveAdminSettings() {
            if (saveAdminSettingsToStorage(adminSettings)) {
                console.log('Admin settings saved successfully');
            }
        }
        
        // Functions
        function handleLogin() {
            const loginCode = document.getElementById('login-code').value;
            
            if (loginCode === adminSettings.loginCode) {
                // Play opening audio
                audioOpening.currentTime = 0;
                audioOpening.muted = false;
                audioOpening.play().catch(e => console.log("Audio play prevented:", e));
                
                // Hide welcome screen with slide out animation
                document.getElementById('welcome-screen').classList.add('slide-out');
                
                // Show terms screen after animation completes
                setTimeout(() => {
                    document.getElementById('welcome-screen').style.display = 'none';
                    document.getElementById('terms-screen').style.display = 'block';
                    document.getElementById('terms-screen').classList.add('slide-in');
                    currentScreen = 'terms';
                }, 500);
            } else {
                alert('Kode login salah. Silakan coba lagi.');
            }
        }
        
        function toggleContinueButton() {
            const agreeCheckbox = document.getElementById('agree-terms');
            document.getElementById('continue-btn').disabled = !agreeCheckbox.checked;
        }
        
        function showParticipantForm() {
            // Hide terms screen with slide out animation
            document.getElementById('terms-screen').classList.add('slide-out');
            
            // Show participant form after animation completes
            setTimeout(() => {
                document.getElementById('terms-screen').style.display = 'none';
                document.getElementById('participant-form').style.display = 'block';
                document.getElementById('participant-form').classList.add('slide-in');
                currentScreen = 'participant';
            }, 500);
        }
        
        function toggleCPNSLicenseSection() {
            const purpose = document.querySelector('input[name="purpose"]:checked').value;
            
            if (purpose === 'Ujian CPNS/P3K') {
                document.getElementById('cpns-license-section').style.display = 'block';
            } else {
                document.getElementById('cpns-license-section').style.display = 'none';
            }
            
            checkParticipantFormValidity();
        }
        
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    showPosition,
                    showError,
                    { enableHighAccuracy: true, timeout: 5000, maximumAge: 0 }
                );
            } else {
                alert("Geolocation tidak didukung oleh browser Anda.");
            }
        }
        
        function showPosition(position) {
            // In a real implementation, you would reverse geocode the coordinates to get an address
            // For demo purposes, we'll just show a mock address
            const address = "Jl. Raya Situbondo No. 123, Kec. Situbondo, Kab. Situbondo, Jawa Timur";
            
            document.getElementById('address').value = address;
            document.getElementById('gps-result').textContent = `Lokasi terdeteksi: ${address}`;
            document.getElementById('gps-result').style.display = 'block';
            
            checkParticipantFormValidity();
        }
        
        function showError(error) {
            let message = "Error mendapatkan lokasi: ";
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    message += "Pengguna menolak permintaan geolocation.";
                    break;
                case error.POSITION_UNAVAILABLE:
                    message += "Informasi lokasi tidak tersedia.";
                    break;
                case error.TIMEOUT:
                    message += "Permintaan untuk mendapatkan lokasi pengguna timeout.";
                    break;
                case error.UNKNOWN_ERROR:
                    message += "Terjadi error yang tidak diketahui.";
                    break;
            }
            
            alert(message);
        }
        
        function checkParticipantFormValidity() {
            let isValid = true;
            
            // Check required fields
            if (!document.getElementById('fullname').value.trim()) {
                isValid = false;
            }
            
            if (!document.getElementById('address').value.trim()) {
                isValid = false;
            }
            
            if (!document.getElementById('phone').value.trim() || 
                !document.getElementById('phone').checkValidity()) {
                isValid = false;
            }
            
            if (!document.getElementById('email').value.trim() || 
                !document.getElementById('email').checkValidity()) {
                isValid = false;
            }
            
            // Check CPNS license if purpose is CPNS
            const purpose = document.querySelector('input[name="purpose"]:checked').value;
            if (purpose === 'Ujian CPNS/P3K') {
                const cpnsLicense = document.getElementById('cpns-license').value;
                if (cpnsLicense !== adminSettings.cpnsLicenseCode) {
                    isValid = false;
                }
            }
            
            document.getElementById('save-participant-btn').disabled = !isValid;
        }
        
        function startExam() {
            // Collect participant data
            participantData = {
                fullname: document.getElementById('fullname').value.trim(),
                address: document.getElementById('address').value.trim(),
                phone: document.getElementById('phone').value.trim(),
                email: document.getElementById('email').value.trim(),
                purpose: document.querySelector('input[name="purpose"]:checked').value,
                examDate: new Date().toISOString()
            };
            
            // Get questions from storage
            const questionBank = getQuestionsFromStorage();
            
            // Load questions based on purpose - DIPERBAHARUI UNTUK MENGAMBIL DARI LOCALSTORAGE DENGAN BENAR
            if (participantData.purpose === 'Ujian CPNS/P3K') {
                if (!questionBank['CPNS_P3K'] || questionBank['CPNS_P3K'].length === 0) {
                    alert('Maaf, belum ada soal CPNS/P3K yang tersedia. Silakan hubungi admin.');
                    return;
                }
                questions = questionBank['CPNS_P3K'];
            } else {
                // Default to IQ test
                if (!questionBank['TES_IQ'] || questionBank['TES_IQ'].length === 0) {
                    alert('Maaf, belum ada soal Tes IQ yang tersedia. Silakan hubungi admin.');
                    return;
                }
                questions = questionBank['TES_IQ'];
            }
            
            // Check if there are enough questions
            if (questions.length === 0) {
                alert('Maaf, belum ada soal yang tersedia untuk ujian ini. Silakan hubungi admin.');
                return;
            }
            
            // Randomize questions if enabled
            if (adminSettings.randomizeQuestions) {
                questions = shuffleArray(questions);
            }
            
            // Limit number of questions based on admin setting
            const questionCount = Math.min(adminSettings.questionCount, questions.length);
            questions = questions.slice(0, questionCount);
            
            // Initialize exam data
            examData = {
                startTime: new Date(),
                answered: 0,
                correct: 0,
                wrong: 0,
                unanswered: questions.length,
                answers: Array(questions.length).fill(null)
            };
            
            // Set exam time based on admin settings
            examTimeLeft = adminSettings.examDuration * 60;
            
            // Hide participant form with slide out animation
            document.getElementById('participant-form').classList.add('slide-out');
            
            // Show exam screen after animation completes
            setTimeout(() => {
                document.getElementById('participant-form').style.display = 'none';
                document.getElementById('exam-screen').style.display = 'block';
                document.getElementById('exam-screen').classList.add('slide-in');
                currentScreen = 'exam';
                
                // Start timer
                startTimer();
                
                // Load first question
                loadQuestion(0);
            }, 500);
        }
        
        // Helper function to shuffle array
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
        
        function startTimer() {
            // Update timer display immediately
            updateTimerDisplay();
            
            // Start timer interval
            examTimer = setInterval(function() {
                examTimeLeft--;
                updateTimerDisplay();
                
                // Check if time is up
                if (examTimeLeft <= 0) {
                    clearInterval(examTimer);
                    finishExam();
                }
                
                // Show warning when 10 minutes left
                if (examTimeLeft === 600) { // 10 minutes = 600 seconds
                    showTimeWarning();
                }
                
                // Hide warning when 1 minute left
                if (examTimeLeft === 60) {
                    hideTimeWarning();
                }
            }, 1000);
        }
        
        function updateTimerDisplay() {
            const hours = Math.floor(examTimeLeft / 3600);
            const minutes = Math.floor((examTimeLeft % 3600) / 60);
            const seconds = examTimeLeft % 60;
            
            const timerElement = document.getElementById('exam-timer');
            timerElement.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Change style based on remaining time
            if (examTimeLeft <= 600) { // 10 minutes or less
                timerElement.classList.add('timer-warning');
                
                if (examTimeLeft <= 60) { // 1 minute or less
                    timerElement.classList.remove('timer-warning');
                    timerElement.classList.add('timer-danger');
                }
            } else {
                timerElement.classList.remove('timer-warning', 'timer-danger');
            }
        }
        
        function showTimeWarning() {
            const notification = document.getElementById('time-warning');
            notification.style.display = 'block';
            
            // Auto hide after 9 minutes (540 seconds)
            setTimeout(() => {
                notification.style.display = 'none';
            }, 540 * 1000);
        }
        
        function hideTimeWarning() {
            document.getElementById('time-warning').style.display = 'none';
        }
        
        function loadQuestion(index) {
            if (index < 0 || index >= questions.length) return;
            
            currentQuestionIndex = index;
            const question = questions[index];
            
            // Update question text
            document.getElementById('question-text').textContent = `Soal ${index + 1}: ${question.question}`;
            
            // Clear previous options
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            
            // Add new options
            question.options.forEach((option, i) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = option;
                
                // Check if this question was already answered
                if (examData.answers[index] !== null) {
                    if (examData.answers[index] === i) {
                        if (i === question.correctAnswer) {
                            optionElement.classList.add('correct');
                        } else {
                            optionElement.classList.add('incorrect');
                        }
                    } else if (i === question.correctAnswer) {
                        optionElement.classList.add('correct');
                    }
                    
                    // Show explanation if answered
                    document.getElementById('explanation-text').style.display = 'block';
                    document.getElementById('explanation-text').innerHTML = `<strong>Penjelasan:</strong> ${question.explanation}`;
                } else {
                    // Add click event for unanswered questions
                    optionElement.addEventListener('click', function() {
                        selectAnswer(index, i);
                    });
                }
                
                optionsContainer.appendChild(optionElement);
            });
            
            // Hide explanation if question not answered
            if (examData.answers[index] === null) {
                document.getElementById('explanation-text').style.display = 'none';
            }
        }
        
        function selectAnswer(questionIndex, answerIndex) {
            const question = questions[questionIndex];
            
            // Record answer
            examData.answers[questionIndex] = answerIndex;
            
            // Update counters
            examData.answered++;
            examData.unanswered--;
            
            if (answerIndex === question.correctAnswer) {
                examData.correct++;
                // Play correct answer sound
                audioCorrect.currentTime = 0;
                audioCorrect.muted = false;
                audioCorrect.play().catch(e => console.log("Audio play prevented:", e));
            } else {
                examData.wrong++;
                // Play wrong answer sound
                audioWrong.currentTime = 0;
                audioWrong.muted = false;
                audioWrong.play().catch(e => console.log("Audio play prevented:", e));
            }
            
            // Reload question to show result
            loadQuestion(questionIndex);
            
            // Auto move to next question after delay if not last question
            if (questionIndex < questions.length - 1) {
                setTimeout(() => {
                    loadQuestion(questionIndex + 1);
                }, 2000);
            }
        }
        
        function skipQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                loadQuestion(currentQuestionIndex + 1);
            }
        }
        
        function showUnansweredQuestions() {
            // Find first unanswered question
            const unansweredIndex = examData.answers.findIndex(answer => answer === null);
            
            if (unansweredIndex !== -1) {
                loadQuestion(unansweredIndex);
            } else {
                alert('Semua soal sudah dijawab.');
            }
        }
        
        function finishExam() {
            clearInterval(examTimer);
            
            // Calculate unanswered questions
            examData.unanswered = examData.answers.filter(answer => answer === null).length;
            
            // Generate certificate code
            const certificateCode = generateCertificateCode(participantData.fullname, participantData.purpose);
            
            // Add participant to data store with enhanced storage mechanism
            const score = Math.round((examData.correct / questions.length) * 100);
            const participantRecord = {
                ...participantData,
                score: score,
                examDate: new Date().toISOString(),
                certificateCode: certificateCode,
                examResults: {
                    totalQuestions: questions.length,
                    correctAnswers: examData.correct,
                    wrongAnswers: examData.wrong,
                    unanswered: examData.unanswered
                }
            };
            
            // Add to participants array
            participantsData.push(participantRecord);
            
            // Save to storage
            if (saveParticipantsToStorage(participantsData)) {
                console.log('Participant data saved successfully:', participantRecord);
            }
            
            // Hide exam screen with slide out animation
            document.getElementById('exam-screen').classList.add('slide-out');
            
            // Show results screen after animation completes
            setTimeout(() => {
                document.getElementById('exam-screen').style.display = 'none';
                document.getElementById('results-screen').style.display = 'block';
                document.getElementById('results-screen').classList.add('slide-in');
                currentScreen = 'results';
                
                // Display results
                displayResults();
                
                // Generate certificate
                generateCertificate(certificateCode);
                
                // Show celebration particles
                showCelebration();
                
                // Play applause sound (mute other sounds)
                audioOpening.muted = true;
                audioCorrect.muted = true;
                audioWrong.muted = true;
                audioButtonClick.muted = true;
                
                audioApplause.currentTime = 0;
                audioApplause.muted = false;
                audioApplause.play().catch(e => console.log("Audio play prevented:", e));
                
                // Reload participants data in admin panel if it's open
                if (document.getElementById('admin-panel-content').style.display === 'block') {
                    loadParticipantsData();
                }
            }, 500);
        }
        
        function generateCertificateCode(fullname, purpose) {
            // Get current date components
            const now = new Date();
            const day = now.getDate().toString().padStart(2, '0');
            const month = (now.getMonth() + 1).toString().padStart(2, '0');
            const year = now.getFullYear().toString().slice(-2);
            
            // Clean and format the name
            const cleanedName = fullname.replace(/[^a-zA-Z\s]/g, '').toUpperCase();
            const nameParts = cleanedName.split(' ');
            
            // Create name code - use first 3 letters of first name and last name
            let nameCode = '';
            if (nameParts.length === 1) {
                nameCode = nameParts[0].substring(0, 6).padEnd(6, 'X');
            } else {
                const firstName = nameParts[0];
                const lastName = nameParts[nameParts.length - 1];
                nameCode = (firstName.substring(0, 3) + lastName.substring(0, 3)).padEnd(6, 'X');
            }
            
            // Get purpose code
            const purposeCode = purpose === 'Ujian CPNS/P3K' ? 'CPNS' : 'TESIQ';
            
            // Generate unique 8-digit alphanumeric code
            const uniqueCode = generateUniqueCode(fullname + now.getTime());
            
            // Combine all components
            return `${nameCode}/${purposeCode}/${day}${month}${year}/${uniqueCode}`;
        }
        
        function generateUniqueCode(input) {
            // Create a hash from the input string
            let hash = 0;
            for (let i = 0; i < input.length; i++) {
                const char = input.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // Convert to 32bit integer
            }
            
            // Convert hash to alphanumeric string (excluding similar characters like 0/O, 1/I)
            const chars = '23456789ABCDEFGHJKLMNPQRSTUVWXYZ';
            let result = '';
            let remaining = Math.abs(hash);
            
            for (let i = 0; i < 8; i++) {
                const index = remaining % chars.length;
                result += chars.charAt(index);
                remaining = Math.floor(remaining / chars.length);
            }
            
            // Format as XXXX-XXXX
            return result.substring(0, 4) + '-' + result.substring(4, 8);
        }
        
        function displayResults() {
            document.getElementById('result-name').textContent = participantData.fullname;
            document.getElementById('result-address').textContent = participantData.address;
            document.getElementById('result-phone').textContent = participantData.phone;
            document.getElementById('result-email').textContent = participantData.email;
            document.getElementById('result-purpose').textContent = participantData.purpose;
            document.getElementById('total-questions').textContent = questions.length;
            document.getElementById('correct-answers').textContent = examData.correct;
            document.getElementById('wrong-answers').textContent = examData.wrong;
            document.getElementById('unanswered-questions').textContent = examData.unanswered;
            
            // Calculate score (percentage)
            const score = Math.round((examData.correct / questions.length) * 100);
            document.getElementById('exam-score').textContent = `${score}%`;
        }
        
        function generateCertificate(certificateCode) {
            const certificateContainer = document.getElementById('certificate-container');
            certificateContainer.innerHTML = '';
            
            // Calculate score
            const score = Math.round((examData.correct / questions.length) * 100);
            
            // Get current date
            const now = new Date();
            const dateString = now.toLocaleDateString('id-ID', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            }).replace(/\//g, '');
            
            // Get motivational message based on score
            let motivation = '';
            for (const range in MOTIVATIONAL_MESSAGES) {
                const [min, max] = range.split('-').map(Number);
                if (score >= min && score <= max) {
                    motivation = MOTIVATIONAL_MESSAGES[range];
                    break;
                }
            }
            
            // Use custom motivation message if available
            if (adminSettings.motivationMessage) {
                motivation = adminSettings.motivationMessage;
            }
            
            // Create certificate HTML
            const certificate = document.createElement('div');
            certificate.className = 'certificate';
            
            certificate.innerHTML = `
                <div class="certificate-content">
                    <h1 class="certificate-title">SERTIFIKAT PRESTASI</h1>
                    <p class="certificate-code">${certificateCode}</p>
                    <p>Diberikan Kepada</p>
                    <h2 class="certificate-recipient">${formatName(participantData.fullname)}</h2>
                    <p class="certificate-body">
                        Atas Partisipasi & Pencapaian Luar Biasa Dalam<br>
                        <strong>Ujian PERGUNUSMART</strong>
                    </p>
                    <p class="certificate-body">
                        Sebagai penghargaan atas dedikasi dalam memahami materi ujian dan mengasah logika, 
                        sertifikat ini diberikan sebagai motivasi untuk terus berkembang.
                    </p>
                    <div class="certificate-score">Nilai: ${score}%</div>
                    <p class="certificate-motivation">${motivation}</p>
                    <div class="certificate-footer">
                        <p>Ditetapkan di: Situbondo, ${now.toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' })}</p>
                        <div class="certificate-signature">
                            <p>Ketua PERGUNUSMART</p>
                            <p><strong>${adminSettings.chairmanName}</strong></p>
                        </div>
                        <img src="https://raw.githubusercontent.com/pergunu/pergunusmart/main/assets/images/BARCODE.png" alt="Barcode" class="certificate-barcode">
                    </div>
                </div>
            `;
            
            certificateContainer.appendChild(certificate);
            certificateContainer.style.display = 'block';
        }
        
        function showCelebration() {
            // Show celebration particles
            document.getElementById('celebration-particles').style.display = 'block';
            
            // Hide after 5 seconds
            setTimeout(() => {
                document.getElementById('celebration-particles').style.display = 'none';
            }, 5000);
        }
        
        function formatName(name) {
            return name.split(' ').map(word => 
                word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()
            ).join(' ');
        }
        
        function printCertificate() {
            // Hide floating buttons
            document.querySelector('.floating-buttons').style.display = 'none';
            
            // Hide other elements in results screen
            document.querySelector('.results-summary').style.display = 'none';
            document.querySelector('.result-actions').style.display = 'none';
            
            // Print the certificate
            window.print();
            
            // Show elements again after printing
            setTimeout(() => {
                document.querySelector('.floating-buttons').style.display = 'flex';
                document.querySelector('.results-summary').style.display = 'block';
                document.querySelector('.result-actions').style.display = 'block';
            }, 500);
        }
        
        function retakeExam() {
            // Hide results screen with slide out animation
            document.getElementById('results-screen').classList.add('slide-out');
            
            // Show participant form after animation completes
            setTimeout(() => {
                document.getElementById('results-screen').style.display = 'none';
                document.getElementById('participant-form').style.display = 'block';
                document.getElementById('participant-form').classList.add('slide-in');
                currentScreen = 'participant';
                
                // Reset timer
                examTimeLeft = adminSettings.examDuration * 60;
            }, 500);
        }
        
        function contactAdmin() {
            const message = encodeURIComponent("Assalamualaikum mas admin, saya mau tanya tentang soal ujian umum nih....");
            window.open(`https://wa.me/6285647709114?text=${message}`, '_blank');
        }
        
        function showQuestionBankModal() {
            document.getElementById('question-bank-modal').style.display = 'flex';
        }
        
        function hideQuestionBankModal() {
            document.getElementById('question-bank-modal').style.display = 'none';
        }
        
        function submitQuestionBankCode() {
            const code = document.getElementById('question-bank-code').value;
            
            if (code === adminSettings.questionBankCode) {
                // Show question bank content
                document.getElementById('question-bank-content').style.display = 'block';
                filterQuestions();
            } else {
                alert('Kode bank soal salah. Silakan coba lagi.');
            }
        }
        
        function showAdminPanelModal() {
            document.getElementById('admin-panel-modal').style.display = 'flex';
        }
        
        function hideAdminPanelModal() {
            document.getElementById('admin-panel-modal').style.display = 'none';
        }
        
        function submitAdminPanelCode() {
            const code = document.getElementById('admin-panel-code').value;
            
            if (code === adminSettings.adminPanelCode) {
                // Show admin panel content
                document.getElementById('admin-panel-content').style.display = 'block';
                loadParticipantsData();
            } else {
                alert('Kode admin salah. Silakan coba lagi.');
            }
        }

        function addQuestionToBank() {
            const category = document.getElementById('question-category').value;
            const questionText = document.getElementById('question-text-input').value.trim();
            const options = [
                document.getElementById('option-a').value.trim(),
                document.getElementById('option-b').value.trim(),
                document.getElementById('option-c').value.trim(),
                document.getElementById('option-d').value.trim(),
                document.getElementById('option-e').value.trim()
            ];
            const correctAnswer = parseInt(document.getElementById('correct-answer').value);
            const explanation = document.getElementById('explanation-input').value.trim();
            
            // Validate inputs
            if (!questionText) {
                alert('Pertanyaan tidak boleh kosong');
                return;
            }
            
            if (options.some(opt => !opt)) {
                alert('Semua opsi jawaban harus diisi');
                return;
            }
            
            if (!explanation) {
                alert('Penjelasan tidak boleh kosong');
                return;
            }
            
            // Get current questions from storage
            const questionBank = getQuestionsFromStorage();
            
            // Add question to the category
            if (!questionBank[category]) {
                questionBank[category] = [];
            }
            
            questionBank[category].push({
                question: questionText,
                options: options.map((opt, i) => `${String.fromCharCode(65 + i)}. ${opt}`),
                correctAnswer: correctAnswer,
                explanation: explanation
            });
            
            // Save to storage
            if (saveQuestionsToStorage(questionBank)) {
                // Clear form
                document.getElementById('question-text-input').value = '';
                document.getElementById('option-a').value = '';
                document.getElementById('option-b').value = '';
                document.getElementById('option-c').value = '';
                document.getElementById('option-d').value = '';
                document.getElementById('option-e').value = '';
                document.getElementById('explanation-input').value = '';
                
                // Refresh questions list
                filterQuestions();
                
                alert('Soal berhasil ditambahkan ke bank soal!');
            }
        }

        function filterQuestions() {
            const category = document.getElementById('filter-category').value;
            const questionsList = document.querySelector('.questions-list');
            
            questionsList.innerHTML = '';
            
            // Get questions from storage
            const questionBank = getQuestionsFromStorage();
            
            if (category === 'all') {
                let hasQuestions = false;
                
                for (const cat in questionBank) {
                    if (questionBank[cat].length > 0) {
                        hasQuestions = true;
                        questionsList.innerHTML += `<h6>${cat.replace('_', ' ')}</h6>`;
                        
                        questionBank[cat].forEach((q, i) => {
                            const questionItem = document.createElement('div');
                            questionItem.className = 'question-item';
                            
                            questionItem.innerHTML = `
                                <p><strong>Soal ${i + 1}:</strong> ${q.question}</p>
                                <div class="options-container">
                                    ${q.options.map(opt => `<p>${opt}</p>`).join('')}
                                </div>
                                <p><strong>Jawaban:</strong> ${q.options[q.correctAnswer]}</p>
                                <p><strong>Penjelasan:</strong> ${q.explanation}</p>
                                <div class="question-actions">
                                    <button class="question-action-btn edit-btn" data-category="${cat}" data-index="${i}">
                                        <i class="fas fa-edit"></i> Edit
                                    </button>
                                    <button class="question-action-btn delete-btn" data-category="${cat}" data-index="${i}">
                                        <i class="fas fa-trash"></i> Hapus
                                    </button>
                                    <button class="question-action-btn view-btn" data-category="${cat}" data-index="${i}">
                                        <i class="fas fa-eye"></i> View
                                    </button>
                                </div>
                            `;
                            
                            questionsList.appendChild(questionItem);
                        });
                    }
                }
                
                if (!hasQuestions) {
                    questionsList.innerHTML = '<p id="no-questions-message">Belum ada soal yang tersedia.</p>';
                }
            } else if (questionBank[category] && questionBank[category].length > 0) {
                questionBank[category].forEach((q, i) => {
                    const questionItem = document.createElement('div');
                    questionItem.className = 'question-item';
                    
                    questionItem.innerHTML = `
                        <p><strong>Soal ${i + 1}:</strong> ${q.question}</p>
                        <div class="options-container">
                            ${q.options.map(opt => `<p>${opt}</p>`).join('')}
                        </div>
                        <p><strong>Jawaban:</strong> ${q.options[q.correctAnswer]}</p>
                        <p><strong>Penjelasan:</strong> ${q.explanation}</p>
                        <div class="question-actions">
                            <button class="question-action-btn edit-btn" data-category="${category}" data-index="${i}">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="question-action-btn delete-btn" data-category="${category}" data-index="${i}">
                                <i class="fas fa-trash"></i> Hapus
                            </button>
                            <button class="question-action-btn view-btn" data-category="${category}" data-index="${i}">
                                <i class="fas fa-eye"></i> View
                            </button>
                        </div>
                    `;
                    
                    questionsList.appendChild(questionItem);
                });
            } else {
                questionsList.innerHTML = '<p id="no-questions-message">Belum ada soal yang tersedia untuk kategori ini.</p>';
            }
            
            // Add event listeners to edit, delete and view buttons
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    const index = parseInt(this.getAttribute('data-index'));
                    editQuestion(category, index);
                });
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    const index = parseInt(this.getAttribute('data-index'));
                    
                    if (confirm('Apakah Anda yakin ingin menghapus soal ini?')) {
                        deleteQuestion(category, index);
                    }
                });
            });
            
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    const index = parseInt(this.getAttribute('data-index'));
                    viewQuestion(category, index);
                });
            });
        }
        
        function editQuestion(category, index) {
            const questionBank = getQuestionsFromStorage();
            const question = questionBank[category][index];
            
            // Fill the edit form
            document.getElementById('edit-question-category').value = category;
            document.getElementById('edit-question-text').value = question.question;
            
            // Extract option texts (remove "A. ", "B. ", etc.)
            document.getElementById('edit-option-a').value = question.options[0].substring(3);
            document.getElementById('edit-option-b').value = question.options[1].substring(3);
            document.getElementById('edit-option-c').value = question.options[2].substring(3);
            document.getElementById('edit-option-d').value = question.options[3].substring(3);
            document.getElementById('edit-option-e').value = question.options[4]?.substring(3) || '';
            
            document.getElementById('edit-correct-answer').value = question.correctAnswer;
            document.getElementById('edit-explanation').value = question.explanation;
            
            // Store original data for reference
            document.getElementById('edit-question-index').value = index;
            document.getElementById('edit-question-original-category').value = category;
            
            // Show the modal
            document.getElementById('edit-question-modal').style.display = 'flex';
        }
        
        function hideEditQuestionModal() {
            document.getElementById('edit-question-modal').style.display = 'none';
        }
        
        function viewQuestion(category, index) {
            const questionBank = getQuestionsFromStorage();
            const question = questionBank[category][index];
            
            // Fill the view form
            document.getElementById('view-question-category').textContent = category.replace('_', ' ');
            document.getElementById('view-question-text').textContent = question.question;
            
            // Display options
            const optionsContainer = document.getElementById('view-options-container');
            optionsContainer.innerHTML = '';
            question.options.forEach(opt => {
                const p = document.createElement('p');
                p.textContent = opt;
                optionsContainer.appendChild(p);
            });
            
            // Display correct answer and explanation
            document.getElementById('view-correct-answer').textContent = question.options[question.correctAnswer];
            document.getElementById('view-explanation').textContent = question.explanation;
            
            // Show the modal
            document.getElementById('view-question-modal').style.display = 'flex';
        }
        
        function hideViewQuestionModal() {
            document.getElementById('view-question-modal').style.display = 'none';
        }
        
        function saveEditedQuestion() {
            const originalCategory = document.getElementById('edit-question-original-category').value;
            const newCategory = document.getElementById('edit-question-category').value;
            const index = parseInt(document.getElementById('edit-question-index').value);
            const questionText = document.getElementById('edit-question-text').value.trim();
            const options = [
                document.getElementById('edit-option-a').value.trim(),
                document.getElementById('edit-option-b').value.trim(),
                document.getElementById('edit-option-c').value.trim(),
                document.getElementById('edit-option-d').value.trim(),
                document.getElementById('edit-option-e').value.trim()
            ];
            const correctAnswer = parseInt(document.getElementById('edit-correct-answer').value);
            const explanation = document.getElementById('edit-explanation').value.trim();
            
            // Validate inputs
            if (!questionText) {
                alert('Pertanyaan tidak boleh kosong');
                return;
            }
            
            if (options.some(opt => !opt)) {
                alert('Semua opsi jawaban harus diisi');
                return;
            }
            
            if (!explanation) {
                alert('Penjelasan tidak boleh kosong');
                return;
            }
            
            // Get current questions from storage
            const questionBank = getQuestionsFromStorage();
            
            // Create updated question
            const updatedQuestion = {
                question: questionText,
                options: options.map((opt, i) => `${String.fromCharCode(65 + i)}. ${opt}`),
                correctAnswer: correctAnswer,
                explanation: explanation
            };
            
            // If category changed, remove from old and add to new
            if (originalCategory !== newCategory) {
                questionBank[originalCategory].splice(index, 1);
                
                if (!questionBank[newCategory]) {
                    questionBank[newCategory] = [];
                }
                
                questionBank[newCategory].push(updatedQuestion);
            } else {
                // Just update the question
                questionBank[originalCategory][index] = updatedQuestion;
            }
            
            // Save to storage
            if (saveQuestionsToStorage(questionBank)) {
                // Refresh questions list
                filterQuestions();
                
                // Hide modal
                hideEditQuestionModal();
                
                alert('Perubahan soal berhasil disimpan!');
            }
        }
        
        function deleteQuestion(category, index) {
            // Get current questions from storage
            const questionBank = getQuestionsFromStorage();
            
            // Remove question from the array
            questionBank[category].splice(index, 1);
            
            // If category is empty, remove it
            if (questionBank[category].length === 0) {
                delete questionBank[category];
            }
            
            // Save to storage
            if (saveQuestionsToStorage(questionBank)) {
                // Refresh questions list
                filterQuestions();
                
                alert('Soal berhasil dihapus!');
            }
        }
        
        function loadParticipantsData() {
            const tableBody = document.getElementById('participants-table-body');
            tableBody.innerHTML = '';
            
            try {
                // Load participants
                participantsData = loadParticipantsFromStorage();
                
                if (participantsData.length === 0) {
                    tableBody.innerHTML = '<tr><td colspan="9" style="text-align: center;">Belum ada data peserta</td></tr>';
                    return;
                }
                
                // Sort by date (newest first)
                const sortedData = [...participantsData].sort((a, b) => 
                    new Date(b.examDate) - new Date(a.examDate));
                
                sortedData.forEach((participant, i) => {
                    const date = new Date(participant.examDate);
                    const dateStr = date.toLocaleDateString('id-ID', {
                        day: '2-digit',
                        month: '2-digit',
                        year: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                    
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td><input type="checkbox" class="select-checkbox participant-checkbox" data-index="${i}"></td>
                        <td>${dateStr}</td>
                        <td>${participant.fullname}</td>
                        <td>${participant.phone}</td>
                        <td>${participant.email}</td>
                        <td>${participant.purpose}</td>
                        <td>${participant.score}%</td>
                        <td>${participant.certificateCode || '-'}</td>
                        <td>
                            <button class="question-action-btn edit-btn edit-participant-btn" data-index="${i}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="question-action-btn delete-btn delete-participant-btn" data-index="${i}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    `;
                    
                    tableBody.appendChild(row);
                });
                
                // Add event listeners to participant checkboxes
                document.querySelectorAll('.participant-checkbox').forEach(checkbox => {
                    checkbox.addEventListener('change', updateSelectedCount);
                });
                
                // Add event listeners to edit and delete buttons for individual participants
                document.querySelectorAll('.edit-participant-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        editParticipant(index);
                    });
                });
                
                document.querySelectorAll('.delete-participant-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        
                        if (confirm('Apakah Anda yakin ingin menghapus peserta ini?')) {
                            deleteParticipant(index);
                        }
                    });
                });
                
            } catch (e) {
                console.error('Error loading participants data:', e);
                tableBody.innerHTML = '<tr><td colspan="9" style="text-align: center; color: red;">Error memuat data peserta</td></tr>';
            }
        }
        
        function searchParticipants() {
            const searchTerm = document.getElementById('participant-search').value.toLowerCase();
            const rows = document.querySelectorAll('#participants-table-body tr');
            
            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                let shouldShow = false;
                
                // Check each cell (except the first and last which are checkboxes and actions)
                for (let i = 1; i < cells.length - 1; i++) {
                    if (cells[i].textContent.toLowerCase().includes(searchTerm)) {
                        shouldShow = true;
                        break;
                    }
                }
                
                row.style.display = shouldShow ? '' : 'none';
            });
        }
        
        function updateSelectedCount() {
            const selectedCount = document.querySelectorAll('.participant-checkbox:checked').length;
            document.getElementById('selected-count').textContent = `${selectedCount} dipilih`;
            
            // Enable/disable bulk action buttons
            document.getElementById('edit-selected-btn').disabled = selectedCount === 0;
            document.getElementById('delete-selected-btn').disabled = selectedCount === 0;
        }
        
        function toggleSelectAllParticipants() {
            const selectAll = document.getElementById('select-all-participants').checked;
            document.getElementById('select-all-header').checked = selectAll;
            document.querySelectorAll('.participant-checkbox').forEach(checkbox => {
                checkbox.checked = selectAll;
            });
            
            updateSelectedCount();
        }
        
        function toggleSelectAllParticipantsHeader() {
            const selectAll = document.getElementById('select-all-header').checked;
            document.getElementById('select-all-participants').checked = selectAll;
            document.querySelectorAll('.participant-checkbox').forEach(checkbox => {
                checkbox.checked = selectAll;
            });
            
            updateSelectedCount();
        }
        
        function editSelectedParticipants() {
            const selectedCheckboxes = document.querySelectorAll('.participant-checkbox:checked');
            
            if (selectedCheckboxes.length === 0) {
                alert('Tidak ada peserta yang dipilih');
                return;
            }
            
            if (selectedCheckboxes.length > 1) {
                alert('Hanya bisa mengedit satu peserta sekaligus');
                return;
            }
            
            const index = parseInt(selectedCheckboxes[0].getAttribute('data-index'));
            editParticipant(index);
        }
        
        function editParticipant(index) {
            const participant = participantsData[index];
            
            // Fill the edit form
            document.getElementById('edit-fullname').value = participant.fullname;
            document.getElementById('edit-address').value = participant.address;
            document.getElementById('edit-phone').value = participant.phone;
            document.getElementById('edit-email').value = participant.email;
            document.getElementById('edit-score').value = participant.score;
            document.getElementById('edit-certificate-code').value = participant.certificateCode || '-';
            
            // Set purpose radio button
            if (participant.purpose === 'Ujian CPNS/P3K') {
                document.getElementById('edit-purpose-cpns').checked = true;
            } else {
                document.getElementById('edit-purpose-iq').checked = true;
            }
            
            // Store participant index
            document.getElementById('edit-participant-index').value = index;
            
            // Show the modal
            document.getElementById('edit-participant-modal').style.display = 'flex';
        }
        
        function hideEditParticipantModal() {
            document.getElementById('edit-participant-modal').style.display = 'none';
        }
        
        function saveEditedParticipant() {
            const index = parseInt(document.getElementById('edit-participant-index').value);
            const participant = participantsData[index];
            
            // Update participant data
            participant.fullname = document.getElementById('edit-fullname').value.trim();
            participant.address = document.getElementById('edit-address').value.trim();
            participant.phone = document.getElementById('edit-phone').value.trim();
            participant.email = document.getElementById('edit-email').value.trim();
            participant.score = parseInt(document.getElementById('edit-score').value);
            participant.purpose = document.querySelector('input[name="edit-purpose"]:checked').value;
            
            // Save to storage
            if (saveParticipantsToStorage(participantsData)) {
                // Refresh participants list
                loadParticipantsData();
                
                // Hide modal
                hideEditParticipantModal();
                
                alert('Perubahan data peserta berhasil disimpan!');
            }
        }
        
        function deleteSelectedParticipants() {
            const selectedCheckboxes = document.querySelectorAll('.participant-checkbox:checked');
            
            if (selectedCheckboxes.length === 0) {
                alert('Tidak ada peserta yang dipilih');
                return;
            }
            
            if (!confirm(`Apakah Anda yakin ingin menghapus ${selectedCheckboxes.length} peserta terpilih?`)) {
                return;
            }
            
            // Get indices of selected participants (sorted in descending order to avoid index shifting)
            const indices = Array.from(selectedCheckboxes)
                .map(checkbox => parseInt(checkbox.getAttribute('data-index')))
                .sort((a, b) => b - a);
            
            // Remove participants from array
            indices.forEach(index => {
                participantsData.splice(index, 1);
            });
            
            // Save to storage
            if (saveParticipantsToStorage(participantsData)) {
                // Refresh participants list
                loadParticipantsData();
                
                alert(`${indices.length} peserta berhasil dihapus!`);
            }
        }
        
        function deleteParticipant(index) {
            participantsData.splice(index, 1);
            
            // Save to storage
            if (saveParticipantsToStorage(participantsData)) {
                // Refresh participants list
                loadParticipantsData();
                
                alert('Peserta berhasil dihapus!');
            }
        }
        
        function validateCertificate() {
            const certificateCode = document.getElementById('certificate-code-input').value.trim();
            const validationResult = document.getElementById('validation-result');
            const certificateInfo = document.getElementById('certificate-info');
            
            if (!certificateCode) {
                alert('Silakan masukkan kode sertifikat');
                return;
            }
            
            // Find participant with this certificate code
            const participant = participantsData.find(p => p.certificateCode === certificateCode);
            
            if (participant) {
                validationResult.textContent = 'Sertifikat Valid';
                validationResult.className = 'validation-result valid';
                
                // Display participant info
                certificateInfo.innerHTML = `
                    <p><strong>Nama:</strong> ${participant.fullname}</p>
                    <p><strong>Tanggal Ujian:</strong> ${new Date(participant.examDate).toLocaleDateString('id-ID')}</p>
                    <p><strong>Tujuan Ujian:</strong> ${participant.purpose}</p>
                    <p><strong>Nilai:</strong> ${participant.score}%</p>
                `;
                certificateInfo.style.display = 'block';
            } else {
                validationResult.textContent = 'Sertifikat Tidak Valid';
                validationResult.className = 'validation-result invalid';
                certificateInfo.style.display = 'none';
            }
            
            validationResult.style.display = 'block';
        }
        
        function saveCodes() {
            const newLoginCode = document.getElementById('new-login-code').value;
            const newQuestionBankCode = document.getElementById('new-question-bank-code').value;
            const newCpnsCode = document.getElementById('new-cpns-code').value;
            const newAdminCode = document.getElementById('new-admin-code').value;
            
            if (newLoginCode || newQuestionBankCode || newCpnsCode || newAdminCode) {
                // Update admin settings
                if (newLoginCode) adminSettings.loginCode = newLoginCode;
                if (newQuestionBankCode) adminSettings.questionBankCode = newQuestionBankCode;
                if (newCpnsCode) adminSettings.cpnsLicenseCode = newCpnsCode;
                if (newAdminCode) adminSettings.adminPanelCode = newAdminCode;
                
                // Save to storage
                saveAdminSettings();
                
                // Clear the fields
                document.getElementById('new-login-code').value = '';
                document.getElementById('new-question-bank-code').value = '';
                document.getElementById('new-cpns-code').value = '';
                document.getElementById('new-admin-code').value = '';
                
                alert('Kode berhasil diubah!');
            } else {
                alert('Silakan masukkan setidaknya satu kode baru');
            }
        }
        
        function saveContent() {
            const greetingMessage = document.getElementById('greeting-message-input').value;
            const adminMessage = document.getElementById('admin-message-input').value;
            const chairmanName = document.getElementById('chairman-name').value;
            const motivationMessage = document.getElementById('motivation-message-input').value;
            
            // Update admin settings
            adminSettings.greetingMessage = greetingMessage;
            adminSettings.adminMessage = adminMessage;
            adminSettings.chairmanName = chairmanName;
            adminSettings.motivationMessage = motivationMessage;
            
            // Save to storage
            saveAdminSettings();
            
            // Update UI
            document.getElementById('greeting-text').textContent = greetingMessage;
            document.getElementById('admin-message').textContent = adminMessage;
            
            alert('Perubahan konten berhasil disimpan!');
        }
        
        function saveSettings() {
            const examDuration = parseInt(document.getElementById('exam-duration').value);
            const questionCount = parseInt(document.getElementById('question-count').value);
            const randomizeQuestions = document.getElementById('randomize-questions').checked;
            const iqEnabled = document.getElementById('toggle-iq').checked;
            const cpnsEnabled = document.getElementById('toggle-cpns').checked;
            
            // Update admin settings
            adminSettings.examDuration = examDuration;
            adminSettings.questionCount = questionCount;
            adminSettings.randomizeQuestions = randomizeQuestions;
            adminSettings.iqEnabled = iqEnabled;
            adminSettings.cpnsEnabled = cpnsEnabled;
            
            // Save to storage
            saveAdminSettings();
            
            alert('Pengaturan ujian berhasil disimpan!');
        }
    </script>
</body>
</html>
