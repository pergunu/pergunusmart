<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hasil Ujian - PERGUNU</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="gradient-bg">
    <div id="particles-js"></div>
    <div class="container results-container">
        <div class="results-box animate__animated animate__fadeIn">
            <div class="results-header">
                <img src="../assets/images/logo.png" alt="PERGUNU Logo" class="logo">
                <h2>Hasil Ujian Anda</h2>
            </div>
            
            <div class="results-content">
                <div class="score-display">
                    <div class="score-circle">
                        <span id="finalScore">0</span>
                        <small>Nilai</small>
                    </div>
                </div>
                
                <div class="results-details">
                    <div class="detail-item">
                        <span class="detail-label">Nama Peserta:</span>
                        <span class="detail-value" id="participantName"></span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Status:</span>
                        <span class="detail-value" id="participantStatus"></span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Jenis Ujian:</span>
                        <span class="detail-value" id="examType"></span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Kode Sertifikat:</span>
                        <span class="detail-value" id="certificateCode"></span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Jawaban Benar:</span>
                        <span class="detail-value" id="correctAnswers"></span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Total Soal:</span>
                        <span class="detail-value" id="totalQuestions"></span>
                    </div>
                </div>
                
                <div class="motivational-message">
                    <h4>Pesan Motivasi:</h4>
                    <p id="motivationText"></p>
                </div>
            </div>
            
            <div class="results-footer">
                <button id="viewCertificateBtn" class="btn btn-primary">Lihat Sertifikat</button>
                <button id="retakeExamBtn" class="btn btn-secondary">Ulangi Ujian</button>
            </div>
        </div>
    </div>

    <script src="../assets/js/main.js"></script>
    <script>
        // Load exam results
        const examResults = JSON.parse(localStorage.getItem('examResults'));
        
        // Display results
        if (examResults) {
            document.getElementById('finalScore').textContent = examResults.score;
            document.getElementById('participantName').textContent = examResults.participant.fullName;
            document.getElementById('participantStatus').textContent = examResults.participant.status === 'pelajar' ? 'Pelajar' : 'Umum';
            document.getElementById('examType').textContent = examResults.participant.purpose;
            document.getElementById('certificateCode').textContent = examResults.certificateCode;
            document.getElementById('correctAnswers').textContent = `${examResults.correctAnswers} dari ${examResults.totalQuestions}`;
            document.getElementById('totalQuestions').textContent = examResults.totalQuestions;
            
            // Set motivational message based on score
            const motivationText = getMotivationalMessage(examResults.score);
            document.getElementById('motivationText').textContent = motivationText;
        }
        
        // Get motivational message based on score
        function getMotivationalMessage(score) {
            if (score >= 90) {
                return "Sempurna! Anda sangat luar biasa dalam menguasai materi ini. Pertahankan prestasi ini.";
            } else if (score >= 75) {
                return "Hasil yang sangat baik! Anda telah menunjukkan pemahaman yang mendalam tentang materi ujian.";
            } else if (score >= 60) {
                return "Hasil yang baik! Teruslah belajar untuk meningkatkan pemahaman Anda.";
            } else if (score >= 40) {
                return "Anda telah menyelesaikan ujian ini. Tinjau kembali materi untuk meningkatkan hasil di masa depan.";
            } else {
                return "Setiap perjalanan dimulai dengan langkah pertama. Gunakan hasil ini sebagai motivasi untuk belajar lebih giat lagi.";
            }
        }
        
        // View certificate button
        document.getElementById('viewCertificateBtn').addEventListener('click', function() {
            window.location.href = 'certificate.html';
        });
        
        // Retake exam button
        document.getElementById('retakeExamBtn').addEventListener('click', function() {
            if (confirm('Apakah Anda yakin ingin mengulang ujian? Hasil sebelumnya akan dihapus.')) {
                window.location.href = 'exam-selection.html';
            }
        });
    </script>
</body>
</html>
